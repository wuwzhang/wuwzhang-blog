---
title: 动效 - PPT - 1
date: '2022-03-04'
tags: ['note', 'motion']
draft: false
summary: 什么样的动效是好动效
---

<TOCInline toc={props.toc} asDisclosure toHeading={3} />

## 一、什么样的动效是好动效

> 动效并不是为了炫技的产物，它是存在是必须有现实意义的

#### 小声逼逼，毕竟实现成本高

![](https://image.uisdc.com/wp-content/uploads/2018/04/uisdc-dx-20180403-19.jpg)

---

### 1. 满足用户的心理预期

> 我们生活在一个物理世界，任何事物的运动都是符合物理世界的客观规律的

因此，人对于事物的观察和理解都是出于对物理规律的理解

![](https://image.uisdc.com/wp-content/uploads/2018/04/uisdc-dx-20180403-17.jpg)

通过合理的动效，让虚拟界面模拟物理世界的规律，例如惯性、视差等等，可以让这个虚拟的世界与物理世界产生交集。用户会把自己对物理世界的认知映射到对产品的认知上。

---

#### 质量

> 物体都拥有质量，质量带来了我们最常见的物理现象：惯性。

![](https://image.uisdc.com/wp-content/uploads/2018/04/uisdc-dx-20180403-14.gif)

_在这个例子中、方块在界面上通过加速、减速、反弹、过冲等等动态来模拟所谓的重量感，让这个简单的界面元素有了实在感。_

#### 空间

> 我们所处的世界是三维的，然而受设备的影响，目前大家接触的大部分人机界面还是二维的

![](https://image.uisdc.com/wp-content/uploads/2018/04/uisdc-dx-20180403-3.gif)

_这个例子中，近处的方块运动的快，远处的方块运动的慢。通过这样的视差的效果，整个屏幕有纵深感，不再是一个简单的二维平面。我们很容易感受到，方块间的层叠顺序。同理，类似简单的动效，可以很轻易的表达元素的层级。_

---

### 2. 引导用户注意力

如果把一个界面上的所有元素，按照明显程度来排序，显而易见我们会得到这样一个顺序：动态 > 色彩 > 明度。

![](https://image.uisdc.com/wp-content/uploads/2018/04/uisdc-dx-20180403-4.gif)

> 所以通过合理的动效，可以低成本的抓取人的注意力，让用户关注想让他们关注的东西。

---

### 一个优秀的例子

> 网易新闻的刷新动画

![](https://image.uisdc.com/wp-content/uploads/2018/04/uisdc-dx-20180403-5.gif)

左上角有一个非常简单的白色线状`icon`，并不会干扰整个页面的主功能，颜色，以及视觉。

通过小的动画，提升了`icon`的视觉层级。起到了非常好的提示效果

---

### 3. 情感化设计

> 情感话设计的目标是在用户接触和使用产品的过程中，激发用户的正向情感，比如愉快，信任，满足；避免用户产生负向情感，比如失望，挫折感，痛苦。

![](https://image.uisdc.com/wp-content/uploads/2018/04/uisdc-dx-20180403-18.jpg)

_正向的情感会使用户更乐于使用产品，遇到使用过程的一些小问题也更加包容，且能打磨产品的品质感_

---

### 优秀的情感设计的例子

![](./chrome-capture.gif)

1. `Bilibili`点赞后，会出现点的赞小电视，
   虽然但是，没啥必要，但这种丰富的细节会让用户对产品产生一个正向的情感关联，而这种关联最终将赢得用户对产品的认同。
2. 还比如，B 站在登录输入密码时，上方的 22、33 娘会蒙上自己的眼睛，既符合现实又可爱

### 二、总结：优秀的界面动效体系

![](https://image.uisdc.com/wp-content/uploads/2018/04/uisdc-dx-20180403-20.jpg)

> 优秀的界面动效体系符合以下四点原则：

1. 通过动效暗示二维界面中暗含的三维层级关系，及其暗含的操作逻辑。
2. 引导用户的注意力向界面重点元素。
3. 通过动态设计让情感化设计变得更生动。
4. 动效的视觉效果统一，控制数量，不滥用。

---

### 举个例子

接下来用 iOS 系统动效来举例子，上述四点，在接下来的例子中都有体现。

#### 层级暗示

![](https://image.uisdc.com/wp-content/uploads/2018/04/uisdc-dx-20180403-8.gif)
_切换界面的时候，所有打开的`APP`界面覆盖在刚才的主界面上面，同时主界面模糊，内容区域的缩小，共同营造出原来界面往深处后退的效果。很直观的表达了主界面和`APP`界面的层级关系。_

#### 操作暗示

![](https://image.uisdc.com/wp-content/uploads/2018/04/uisdc-dx-20180403-10.gif)
_在这个例子中，长按一个 图标进入编辑模式，所有图标都会开始晃动。虽然整个页面并没有任何文字提示说明「现在图标可以拖动的」，但是这种抖动的不稳定感很直观的表达了设计者的意图。_

---

![](https://image.uisdc.com/wp-content/uploads/2018/04/uisdc-dx-20180403-11.gif)
_当输入密码错误的时候，密码输入栏会显示出一个摇头的效果。完全可以想象，假设用一个错误提示的弹窗，不仅会中断用户的操作流程，引起人的反感，而且很容易让人受挫。通过动效，设计者用一种更友好简单的方式达到了提示的目的。_

#### 趣味

![](https://image.uisdc.com/wp-content/uploads/2018/04/uisdc-dx-20180403-16.gif)
_这里是开关状态的过度，我们可以看到月亮会有盈亏，锁的状态有锁上和开启两种。这些有趣味的细节动效给用户带来惊喜，提升界面的品质。_

---

#### 克制

> 举了那么多正面例子，下面也说两个反例。这两张图都是 dribbble 上点赞量非常高的图, 但是实际上，完全不推荐在产品中使用这样的效果。

**动效不能滥用，要控制数量**

在这页面中，所有东西都在动。很难让人抓住视觉重心。当菜单栏下滑的时候，每一个菜单都会有一个抖动的效果。

我们并不知道这个菜单为什么要这样颤，看起来作者只是为了炫技这么做，完全是对用户心智上造成负担。

![](https://image.uisdc.com/wp-content/uploads/2018/04/uisdc-dx-20180403-12.gif)

![](https://image.uisdc.com/wp-content/uploads/2018/04/uisdc-dx-20180403-13.gif)

好的动效要控制在 0.3~0.5 秒，本例中，菜单出现几乎花费了一秒。频繁打开菜单很容易引起人的疲倦，可以说是画蛇添足了。

### 三、再来说说对接问题

开发和设计师沟通困难, 这是因为没有通过精准的**参数**去描述动效。

> 要解决这个问题，我们需要创造一套有效的动效标注系统，这个系统必须做到以下两点

- 让设计师可以轻松地描述动效
- 让开发可以准确地还原动效

> 构建这套『标注』的方法分以下两个部分阐述：

- 动效量化
- 使用设计工具

---

### 动效量化

> 其实，界面动效背后涉及到的设计参数非常简单，只有三种。

无论多复杂的动效也是这三种参数经过组合拼接出来的：

![](http://image.woshipm.com/wp-files/2018/04/kg2UzN9ejDBRMGRITzSC.jpg)

---

> 变化

变化可以划分为四类（如动图所示），这四类变化基本涵盖了界面元素的全部运动方式，只要我们准确地描述元素在动效前后的变化量，就可以准确地完成「变化」这个参数的对接。

![](http://image.woshipm.com/wp-files/2018/04/adzf2L3mpfZwQ1Vo9tWE.gif)

---

> 举个例子，下面动图中被扔出来的绿色小恐龙就同时包含上述四种变化。

![](http://image.woshipm.com/wp-files/2018/04/rZ91d2Y38UlrIUZhxRNi.gif)

![](http://image.woshipm.com/wp-files/2018/04/QD4MUbgWTV736kmdQ9Ta.jpg)
_它在`AE`中前后变化的参数_

这正与`transform`的属性不谋而合（可能谋了，那就是殊途同归）

---

> 时长

第二个关键参数就是时长，这个顾名思义也就是动画播放的时间长度。

无论变化是多是少，简单还是复杂，我们需要把每一段变化的时间确定，时间短干脆利落，时间长轻缓柔和。
![](http://image.woshipm.com/wp-files/2018/04/tZIFLjdB09KNKlkWMY3f.gif)

---

> 曲线

曲线描述的是物体运动时候的速度变化，如果说变化和时长是动效的本体，那么曲线就是动效的灵魂。

对于一个运动的物体，同样的变化，同样时间，赋予不同的速度曲线，会让它的动效产生丰富的变化。

最基础的速度曲线有线性（就是全程匀速）、缓入、缓出、缓入缓出四种：

![](http://image.woshipm.com/wp-files/2018/04/ePEVzNAmM6J1h1n15Z8W.jpg)

![](http://image.woshipm.com/wp-files/2018/04/g4C14yU7dA4qSVPwVEy5.gif)

_在上图的例子中小圆运动时长一致，它们水平位移、一起到达终点，显然速度曲线不一样_

无独有偶，这四个属性，又暗合`transition-timing-function`，懂得都懂

> 当然这时候你会很自然的想到`cubic-bezier`，我会在下面的章节讲

_如果看到这里你还有许多疑问、推荐阅读 MartinRGB 写的[MartinRGB/MTGuideline](https://github.com/MartinRGB/MTGuideline/wiki/1.0-Motion-Design-%E8%A7%84%E8%8C%83%E7%BB%BC%E8%BF%B0)、里面从交互动画的风格定义、到动效设计 － 标注 － 开发流程 都有介绍~_

---

### 这时，你是否有很自然的想到了，是不是可以把『锅』扔给设计师

> 毕竟，大多数前端开发者在设计和动效方面并没有太多积累，因而难以做优秀的效果。

下面是前端和设计师（或动效设计师）点的技能点对比：

|              | 设计师          | 前端开发                     | 备注                                                                      |
| ------------ | --------------- | ---------------------------- | ------------------------------------------------------------------------- |
| 是否擅长动画 | 大部分          | 少部分（没有感情的 display） |
| 如何生产动画 | GUI 工具，如 AE | 编写代码                     |
| 效益         | 高              | 低                           | 1. 专业度 2. 实现效率：可视化 > 编写代码 3. 沟通成本 4. 各方满意度 5. ... |

_从上表可得，将『动效设计』交给设计师能显著提高效益。_

> 从实际工作流程上说：

设计师与前端开发的排期由『线性』变为『部分重叠』：设计师交付静态视觉稿后，前端开发就能进行视觉还原，设计师此时即可进入动效设计。

---

> 假设达成以上共识后，那么剩下的问题就是：如何还原『动效稿』？

_有已知以下的两张设计稿_

| ![](http://storage.360buyimg.com/mtd/home/ae2web-31560770181612.gif) | ![](http://storage.360buyimg.com/mtd/home/ae2webezgif-com-optimize1560770283267.gif) |
| -------------------------------------------------------------------- | ------------------------------------------------------------------------------------ |
| 补间动画——Apple                                                      | 逐帧动画——洗衣机                                                                     |

其实，摆在我们面前的有两种实现方式：

1. 机械：通过工具直接导出
2. 手工：手动取参数，通过掌握的 Web 技术实现

很显然：

|        | 机械 | 手工（个体差异大） |
| ------ | ---- | ------------------ |
| 效率   | 高   | 低                 |
| 精度   | 高   | 视情况而定         |
| 定制化 | 低   | 高                 |
| 情怀   | 无   | 因人而异           |

_机械代表着“未来、高效”。业界出现了很多优秀的工具，使得在浏览器渲染复杂动效成为了可能，且极大地提高了效率。_

---

> 代表工具有：

1. [Bodymovin](https://exchange.adobe.com/creativecloud.details.12557.html#.WpunqpNuZmM)是 AE 的一个插件，用于将 AE 导出为 Web 动画（HTML、SVG 或 Canvas），仅支持 AE 部分特性。
2. lottie-web 是 Airbnb 团队的一个用于在 Web、Android、iOS 和 React Native 渲染 AE 动画的库。(已多次亲情推荐，亲测有效)

> 机械化生产可能未必满足所有要求

主要体现在：机械化生产导致介入难度高。

若出现以下问题就难以解决：

1. 兼容性
2. 在动画过程中插入自定义逻辑
3. 工具自身的不完善
4. 文件体积要求
5. ...

_无论如何，『机械化』是未来，期待它以完美的姿态到来_

---

### 手工怎么做

> 手工代表着“自定义、可控性”。无论世界如何工具化, 这恰恰是『机械化』目前所不具备的特性，总有一些人保持着对『手工』的热情。也是剩下部分着重讲述的

基于`AE`手工实现`Web`动画的主要工作有两个：

1. 在动效稿上拿到元素的参数信息，如 x/y/z、rotation 等
2. 通过适当的 Web 技术进行实现，如 CSS3/Canvas/SVG 等

Web 动画一般分为**逐帧动画**和**补间动画**。

显然，对于取参操作来说，逐帧动画比补间动画的工作量要大得多(_所有才说高质量的动画，都是经费爆炸_)，但两者操作一致。

---

> 以 补间动画 Apple 为例

打开 apple.aep 文件，AE 界面如下：

![](https://misc.aotu.io/JChehe/2018-03-06-ae2web/ae_gui.png)

> 点击『信息模块』预览面板的播放按钮或拖动『时间轴模块』的 标记 3 即可预览动画。

根据 CSS3 animation 属性，我们需要获取以下信息：

1. 动画持续时间 animation-duration
2. 关键帧之间的缓动函数 animation-timing-function
3. 动画延时时间 animation-delay

---

> 为了方便阐述，我们选取整个 Apple 动画中一个小圆圈（共 60 个）为代表，其余元素同理。 另外，由于该动画是一次性的，无需设置/获取动画的重复次数（animation-iteration-count）、运动方向（animation-direction）。

看『图层、运动模块』的 标记 1：

![](https://misc.aotu.io/JChehe/2018-03-06-ae2web/fps.png)

可得，FPS 为 12，即 1 秒 12 帧， 1 帧 0.0833 秒。

由上面 Apple 动画 可看出，每个圆的延时时间（animation-delay）、缓动函数（animation-timing-function）和持续时间（animation-duration）均不相同。

换句话说，每个圈都是一个独立的补间动画，所有元素组合起来才是一个完整的补间动画。

双击『标记 2』，进入编组以查看每个圆的信息。

![](https://misc.aotu.io/JChehe/2018-03-06-ae2web/ae-keyframes.png)

子元素——圆

在『查看器』或『图层、运动模块』任意选中一个圆，展开其 变换 属性并单击 位置（标记 1），即可显示右侧的元素运动路径（标记 2）。同时这也反映了属性的变化速率（即缓动函数（animation-timing-function），这方面会在后面详解。

_位置 前面的时钟图标为蓝色时，代表有过渡动画_

---

![](https://misc.aotu.io/JChehe/2018-03-06-ae2web/timeline.png)

> 结合上面知识，可从上图得出以下信息点：

1. 该元素共有 4 个关键帧
2. 只有 Y 轴上发生位移运动（绿线），X 轴上则是静止状态（红线）
3. 延时时间为 1 帧
4. 中间停留时间（第 2、3 关键帧之间）为 1 帧
5. 过渡时间为 42 帧（3 \* 12 + 7 - 1）。注意要减去延时时间（1），因为 02:03 包含了它。下同。

上代码：
![](https://z3.ax1x.com/2021/05/27/2PWEm6.png)

其余元素按照以上步骤执行即可完成整个动画。

假设没有动画演示和动效稿，仅凭借着个人感觉，编码完成一个由 60 多个元素组成的动画，简直难于上青天。

---

> 如果第 1、2 帧和第 3、4 帧的缓动函数不相同时，该怎么办？

首先部分人可能对 animation-timing-function 存在误解：它是作用于整个 @keyframes 规则的。❌

![](https://misc.aotu.io/JChehe/2018-03-06-ae2web/timing-function-error.png)

缓动函数是作用于 @keyframes 规则内的关键帧。

若未为关键帧指定 animation-timing-function，则会从其元素取得 animation-timing-function。

更严格地说，缓动函数是应用在属性上，从定义该属性的关键帧到下一个指定同样属性的关键帧, 若后续无指定该属性的关键帧则到动画结束。

因此，在 100% 或 to 关键帧上指定 animation-timing-function 是**无用**的。

举个例子：
![](https://z3.ax1x.com/2021/05/27/2PfCE8.png)

- 在 0% 关键帧中指定的 animation-timing-function: linear 是对 transform 和 opacity 属性有效。
- 在 50% 关键帧未指定 transform 属性，所以 animation-timing-function: linear 对它生效至有指定 transform 属性的关键帧，即 100%。
- 由于 50% 关键帧未指定 animation-timing-function，所以它会使用 .box 元素上指定的 ease 缓动函数。

_总上所述，可在关键帧上指定不同的缓动函数，以满足关键帧间属性的不同变化速率_

---

### 更强大的 cubic-bezier

细心的读者可能又发现：缓动函数碰巧是 预定义的关键字 ，如果是以下这种情况呢？

![](https://misc.aotu.io/JChehe/2018-03-06-ae2web/complicated-timing-function.png)

显然浏览器预定义的关键字无法表示该类型的缓动函数，但浏览器提供了强大的 cubic-bezier() 方法。翻译过来就是三次贝塞尔曲线。因此，我们可以通过该方法自定义缓动函数。

> 想了解贝塞尔曲线的更多知识，可阅读[《贝塞尔曲线扫盲》](http://www.html-js.com/article/1628) 。

AE 时间轴上呈现的是属性的变化路径，其未必与变化速率（即缓动函数）完全一致。因为它们的 X/Y 轴含义不同。

![](https://misc.aotu.io/JChehe/2018-03-06-ae2web/ae2css.png)

如上图所示，AE 是属性随着时间而变，CSS3 animation 是动画进度随着时间而变。

然而属性的变化是有方向的，动画进度是永远向前的。

---

> 举个例子：

AE：
![](https://misc.aotu.io/JChehe/2018-03-06-ae2web/ae-timing.png)

AE 属性变化是有方向的, 动画进度永远是向前的
对应 CSS3 animation-timing-function：

![](https://misc.aotu.io/JChehe/2018-03-06-ae2web/css-timing.png)
_如图所示，下图是上图的速率变化（缓动函数）_

理清 AE 与 CSS3 animation 的对应关系后，剩下的问题就是：如何通过 cubic-bezier() 表示图中的 CurveA 与 CurveB。

_也许有工具可从 AE 直接导出（欢迎补充链接），此处推荐使用 Ceasar 或 Cubic-Bezier.com 这类可视化工具直接模拟生成（之前每周分享的 SVG 篇也有提到）_

因此，上述补间动画的缓动函数可表示为：

![](https://z3.ax1x.com/2021/05/27/2PfPUS.png)

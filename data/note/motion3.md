---
title: åŠ¨æ•ˆ - PPT - 2
date: '2022-03-05'
tags: ['motion']
draft: false
summary: åŠ¨æ•ˆå®ç°æ–¹æ¡ˆ
---

<TOCInline toc={props.toc} asDisclosure toHeading={3} />

### å®ç°æ–¹æ¡ˆ

| æ–¹æ¡ˆ   | å®ç°æ–¹æ¡ˆ                                                  | ä¼˜åŠ¿                                                                                                                                                                                                                           | åŠ£åŠ¿                                                                                                                                                                                        |
| ------ | --------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------- |
| æ‰‹å·¥   | css3 / canvas / svg / Web API                             | çµæ´»ï¼Œæ‰€æœ‰åŠ¨æ•ˆéƒ½å°½åœ¨å¼€å‘çš„æŒæ¡                                                                                                                                                                                                 | å¼€å‘æ—¶é—´é•¿ï¼Œæ²Ÿé€šæˆæœ¬å¤§ï¼Œè®¾è®¡åŒå­¦å¾ˆéš¾ç©ºå£æè¿°å‡ºæƒ³è¦çš„åŠ¨æ•ˆï¼Œä¹Ÿå—å¼€å‘çš„æ°´å¹³é™åˆ¶æ¯”è¾ƒå¤§                                                                                                          |
| gif    |                                                           | å¼€å‘æˆæœ¬ä½ï¼Œæ²Ÿé€šæˆæœ¬å°                                                                                                                                                                                                         | 1. ç”»è´¨ä¸Šï¼Œgif æ”¯æŒé¢œè‰²å°‘(æœ€å¤§ 256 è‰²)ã€Alpha é€æ˜åº¦æ”¯æŒå·®ï¼Œå›¾åƒé”¯é½¿æ¯›è¾¹æ¯”è¾ƒä¸¥é‡ 2. äº¤äº’ä¸Šï¼Œä¸èƒ½ç›´æ¥æ§åˆ¶æ’­æ”¾ã€æš‚åœã€æ’­æ”¾æ¬¡æ•°ï¼Œçµæ´»æ€§å·® 3. æ€§èƒ½ä¸Šï¼Œgif ä¼šå¼•èµ·é¡µé¢å‘¨æœŸæ€§çš„ paint ï¼Œæ€§èƒ½è¾ƒå·®ã€‚ |
| è§†é¢‘   |                                                           | å¯ä»¥ä¾¿æ·çš„æ“ä½œåºåˆ—å¸§ï¼Œå¼€å‘æˆæœ¬å°ï¼Œç›¸è¾ƒ gif ä½“ç§¯è¾ƒå°                                                                                                                                                                            | ç§»åŠ¨ç«¯è§†é¢‘åœ¨ä¸åŒ appã€ä¸åŒæœºå‹ã€ä¸åŒç³»ç»Ÿçš„æ’­æ”¾ä½“éªŒä¸å¤§ä¸€æ ·ï¼Œå°¤å…¶æ˜¯ app å†…ï¼Œéœ€è¦ç«¯ä¾§åšä¸€äº›å¤„ç†                                                                                               | å°½é‡ä¸è¦åœ¨ç§»åŠ¨ç«¯ä½¿ç”¨ |
| é›ªç¢§å›¾ |                                                           | å¼€å‘æˆæœ¬ä¸­ç­‰ï¼Œæ²Ÿé€šæˆæœ¬å°                                                                                                                                                                                                       | åˆæˆçš„é›ªç¢§å›¾æ–‡ä»¶å¤§ï¼Œä¸”åœ¨ä¸åŒå±å¹•åˆ†è¾¨ç‡ä¸‹å¯èƒ½ä¼šå¤±çœŸ                                                                                                                                          |
| apng   | å¼€å‘ç”¨å›¾ç‰‡çš„å½¢å¼åµŒå…¥                                      | åŒ gifï¼Œä½“ç§¯è¾ƒ gif å°ï¼Œå¯ä»¥ä¸ webp çš„å¤§å°ç›¸å¯¹æ¯”ï¼Œæ€§èƒ½æ€§ä»·æ¯”ç›¸å¯¹é«˜                                                                                                                                                              | 1.æ”¯æŒå…¨å½©å’Œé€æ˜(æœ€é‡è¦) 2.å‘ä¸‹å…¼å®¹ PNG 3.æ— ä¸“åˆ©é—®é¢˜(ä¹‹å‰ GIF çš„ LZW ç®—æ³•æœ‰ä¸“åˆ©é™åˆ¶)                                                                                                        |
| lottie | è®¾å¼€å‘å¼•å…¥ lottie æ’ä»¶ï¼Œå¹¶å¯¹è®¾è®¡ç»™å‡ºçš„ json è¿›è¡Œè§£æ      | å¼€å‘æˆæœ¬ä¸­ç­‰ï¼Œæ•ˆæœä¸å—å¼€å‘åŒå­¦æ°´å¹³é™åˆ¶ï¼Œåªè¦è®¾è®¡ç”»çš„å‡ºï¼Œå¼€å‘å°±èƒ½å®ç°å‡ºæ¥ï¼›çµæ´»ï¼ŒåŸºç‚¹å…ƒç´ å¯ä»¥ä½œä¸ºä¸€ä¸ªæ™®é€šçš„ dom èŠ‚ç‚¹è¿›è¡Œå®šä½ï¼Œæ•´ä¸ªåŠ¨ç”»å¯ä»¥ä»»æ„æ’­æ”¾åœæ­¢ç”šè‡³å€’æ”¾ä»¥åŠä»æŸä¸€å¸§å¼€å§‹æ’­æ”¾ï¼ˆå…·ä½“èƒ½å®ç°çš„å‚è§ api æ–‡æ¡£ï¼‰ï¼Œçµæ´»åº¦éå¸¸é«˜ã€‚ | åœ¨å¼€å‘å±‚é¢å’Œè®¾è®¡å±‚é¢çœ‹åˆ°çš„å¸§èŠ‚ç‚¹ä»¥åŠæ’­æ”¾é€Ÿåº¦ä¸åŒï¼Œéœ€è¦æŒç»­è¿›è¡Œæ²Ÿé€šè”è°ƒï¼Œæ²Ÿé€šæˆæœ¬å¤§ï¼›lottie æ’ä»¶æ‰“åŒ…å‰ 400+kbï¼Œæ‰“åŒ…åä¹Ÿæœ‰ 200+kbï¼Œä¼šæ˜¾è‘—å¢åŠ é¡¹ç›®çš„å¤§å°                                       |
| svga   | è®¾è®¡åŒå­¦ç»™å‡º .svga æ–‡ä»¶ï¼Œå¼€å‘å¼•å…¥ svga æ’ä»¶ï¼Œå¯¹å…¶è¿›è¡Œè§£æ | ç†è®ºä¸Šæ¥è¯´åŒ lottie                                                                                                                                                                                                            | å®é™…å¼•å…¥ä¸­ï¼Œå­˜åœ¨â€œæ— æ•…æ¸…é™¤ canvas ç”»å¸ƒâ€çš„é—®é¢˜ï¼Œä¸ç¨³å®šæ€§æé«˜ï¼Œå»ºè®®åªä½¿ç”¨åœ¨å•çº¯æ’­æ”¾çš„åœºæ™¯                                                                                                      |

---

### ä»€ä¹ˆæ˜¯ APNG

> APNG æ˜¯åŸºäº PNG æ ¼å¼æ‰©å±•çš„ä¸€ç§ä½å›¾åŠ¨ç”»æ ¼å¼ï¼Œå¢åŠ äº†å¯¹åŠ¨ç”»å›¾åƒçš„æ”¯æŒï¼ŒåŒæ—¶åŠ å…¥äº† 24 ä½çœŸå½©è‰²å›¾åƒå’Œ 8 ä½ Alpha é€æ˜åº¦çš„æ”¯æŒï¼ŒåŠ¨ç”»æ‹¥æœ‰æ›´å¥½çš„è´¨é‡ã€‚

[gif vs apng vs webp](http://littlesvr.ca/apng/gif_apng_webp3.html)
![](https://p6.music.126.net/obj/wo3DlcOGw6DClTvDisK1/3515572012/bc69/f332/118e/d174b90ccb3b2598e83c3a71dcc39a09.png)

![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/87b333f72050452997fc9afc490d7744~tplv-k3u1fbpfcp-watermark.image)

å¦‚æœåŠ¨ç”»ä»…å•ç‹¬å±•ç¤ºå¯ä»¥ä½¿ç”¨`<img>`ç›´æ¥å±•ç¤º APNG åŠ¨ç”»ï¼Œä½†æ˜¯ä¼šå­˜åœ¨**å…¼å®¹æ€§ Bug**

- éƒ¨åˆ†æµè§ˆå™¨ä¸æ”¯æŒ APNG æ’­æ”¾
- apng åœ¨é¡µé¢ä¸Šåªèƒ½æ’­æ”¾ä¸€æ¬¡ï¼Œæ‰€ä»¥å¦‚æœä¸€ä¸ªåŠ¨ç”»éœ€è¦é‡å¤æ’­æ”¾ï¼Œéœ€è¦æ¯æ¬¡ç»™åŠ¨ç”»è¿æ¥æ·»åŠ æ—¶é—´æˆ³ï¼Œè®©æµè§ˆå™¨è®¤ä¸ºæ˜¯ä¸€ä¸ªæ–°çš„è¿æ¥
- apng åœ¨å®‰å“å’Œ ios ä¸Šè¡¨ç°å­˜åœ¨å·®è·ï¼Œä¾‹å¦‚å®‰å“æ’­æ”¾ä¸€æ¬¡ï¼Œios ä¼šæ’­æ”¾ä¸¤æ¬¡
- apng çš„åŠ¨ç”»æ—¶é—´æ— æ³•æ§åˆ¶ï¼Œå¾ˆéš¾å®ç°ä¸­é€”æš‚åœï¼Œè¡”æ¥ç­‰æ“ä½œ

å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡[apng-canvas]å°† apng è½¬ä¸º canvas, æ¥æŠ¹å¹³ä¸åŒæµè§ˆå™¨çš„å·®å¼‚ï¼Œä¸”ä¾¿äºæ§åˆ¶ APNG æ’­æ”¾

_åŸç†å¯è§[Web ç«¯ APNG æ’­æ”¾å®ç°åŸç†](https://juejin.cn/post/6857678436304388104)_

### steps

> steps()åŠŸèƒ½ç¬¦å’Œ CSS3 animation ä¸­çš„ cubic-bezier()åŠŸèƒ½ç¬¦çš„åœ°ä½å’Œä½œç”¨æ˜¯ä¸€æ ·çš„ï¼Œéƒ½å¯ä»¥ä½œä¸º animation-timing-function çš„å±æ€§å€¼ã€‚

steps()æ›´åƒæ˜¯æ¥¼æ¢¯å¡é“ï¼Œcubic-bezier()æ›´åƒæ˜¯æ— éšœç¢å¡é“ã€‚å¦‚ä¸‹å›¾ç¤ºæ„ï¼š
[![2BK3m8.png](https://z3.ax1x.com/2021/06/07/2BK3m8.png)](https://imgtu.com/i/2BK3m8)

###### ç”¨æ³•

```scss
// steps(number, position)
steps(5, end);
steps(2, start);
```

- ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šäº†å‡½æ•°ä¸­çš„é—´éš”æ•°é‡ï¼ˆå¿…é¡»æ˜¯æ­£æ•´æ•°ï¼‰
- ç¬¬äºŒä¸ªå‚æ•°å¯é€‰ï¼ŒæŒ‡å®šåœ¨æ¯ä¸ªé—´éš”çš„èµ·ç‚¹æˆ–æ˜¯ç»ˆç‚¹å‘ç”Ÿé˜¶è·ƒå˜åŒ–ï¼Œæ¥å— start å’Œ end ä¸¤ä¸ªå€¼ï¼Œé»˜è®¤ä¸º end

![](https://img12.360buyimg.com/ling/jfs/t1/76833/39/2270/11321/5d08af97Ea8628351/cc4b972e192ab455.png)

---

### ä¸¾ä¸ª ğŸŒ°

> `step()`å‡½æ•°ç»“åˆåºåˆ—å¸§å›¾ç‰‡ï¼Œå¯ä»¥å®ç°å¾ˆå¤šå°è€Œç¾çš„é€å¸§åŠ¨ç”»æ•ˆæœã€‚å¦‚ twitter çš„ Like çš„æ•ˆæœ

é€å¸§æ˜¾ç¤ºä¸‹å›¾ï¼Œç„¶åæ§åˆ¶ background-position å®ç°æ•ˆæœã€‚

![](https://cssanimation.rocks/images/posts/steps/heart.png)

```scss
// animation-play-state: paused | running;
animation: heart-burst steps(28) 0.8s infinite both;
```

**è¿˜æœ‰è¿˜æœ‰~**

CSS3 åŠ¨ç”»æ˜¯å¯ä»¥éšæ—¶æš‚åœçš„ï¼ŒçœŸæš‚åœï¼Œçº¹ä¸ä¸åŠ¨çš„é‚£ç§ï¼Œåªéœ€è¦ä½¿ç”¨è¿™æ®µ CSS å£°æ˜å³å¯ï¼š

```scss
animation-play-state: paused;
```

ç»“åˆè¿™äº›ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°
![](https://user-gold-cdn.xitu.io/2018/10/16/1667baa4000711c9?imageslim)
[codepen-star](https://codepen.io/wuw/pen/VwpdvdO)

---

### è¿åŠ¨åˆ†è§£

å¯¹äºå¤æ‚åŠ¨ç”»ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹åŠ¨ç”»è¿›è¡Œåˆ†è§£ï¼Œé€šè¿‡æ ‡ç­¾åµŒå¥—ï¼Œåˆ†åˆ«åº”ç”¨åœ¨ç¥–å…ˆå…ƒç´ å’Œåä»£å…ƒç´ ä¸Šï¼Œä¾‹å¦‚ä¸‹å›¾è¿™ä¸ªæŠ›ç‰©çº¿åŠ¨ç”»æ•ˆæœï¼š
![](https://user-gold-cdn.xitu.io/2018/10/16/1667baa411504371?imageslim)

```scss
@keyframes xAxis {
  100% {
    animation-timing-function: linear;
    transform: translateX(100px);
  }
}

@keyframes yAxis {
  100% {
    animation-timing-function: ease-in;
    transform: translateY(100px);
  }
}
```

[codepen-è¿åŠ¨åˆ†è§£](https://codepen.io/wuw/pen/oNZyoOR)

---

### æ¢ç§˜ç¥å¥‡çš„è¿åŠ¨è·¯å¾„åŠ¨ç”» motion path

> ä»€ä¹ˆæ˜¯ CSS Motion Path è¿åŠ¨è·¯å¾„ï¼Ÿåˆ©ç”¨è¿™ä¸ªè§„èŒƒè§„å®šçš„å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶å…ƒç´ æŒ‰ç…§ç‰¹å®šçš„è·¯å¾„è¿›è¡Œä½ç½®å˜æ¢çš„åŠ¨ç”»ã€‚å¹¶ä¸”ï¼Œè¿™ä¸ªè·¯å¾„å¯ä»¥æ˜¯éå¸¸å¤æ‚çš„ä¸€æ¡è·¯å¾„

CSS ä¼ ç»Ÿæ–¹å¼å®ç°ç›´çº¿è·¯å¾„åŠ¨ç”»

CSS ä¹Ÿå¯ä»¥å®ç°ä¸€äº›ç®€å•çš„æ›²çº¿è·¯å¾„åŠ¨ç”»çš„ï¼Œ ä½†æ˜¯å¯¹äºç®€å•å¼§çº¿è¿˜èƒ½å®ç°ï¼Œæ¯”å¦‚ä¸Šé¢è®²çš„åŠ›çš„åˆ†è§£ï¼Œä½†æ˜¯å†å¤æ‚ä¸€ç‚¹çš„ï¼Œæ¯”å¦‚ä¸‹å›¾ï¼Œå°±æ— èƒ½ä¸ºåŠ›äº†

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a8352a40165d4943a59a2b09f53e13ac~tplv-k3u1fbpfcp-zoom-1.image)

CSS Motion Path è§„èŒƒä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ä¸ªå±æ€§ï¼š

- offset-pathï¼šæ¥æ”¶ä¸€ä¸ª SVG è·¯å¾„ï¼ˆä¸ SVG çš„ pathã€CSS ä¸­çš„ clip-path ç±»ä¼¼ï¼‰ï¼ŒæŒ‡å®šè¿åŠ¨çš„å‡ ä½•è·¯å¾„
- offset-distanceï¼šæ§åˆ¶å½“å‰å…ƒç´ åŸºäº offset-path è¿åŠ¨çš„è·ç¦»
- offset-positionï¼šæŒ‡å®š offset-path çš„åˆå§‹ä½ç½®
- ...

_å…¶å® offset-path è¿™ä¸ªå±æ€§éƒ½å‰èº«å«åš motion-path ï¼Œå¹¶ä¸”æ‰€æœ‰ motion-* ç›¸å…³éƒ½å±æ€§éƒ½æ”¹ä¸ºäº† offset-*_

[codepen-motion-path](https://codepen.io/wuw/pen/qBrKpoE)

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6fe1f250fbab4f77a18409fc1fc9ada0~tplv-k3u1fbpfcp-zoom-1.image)

[CodePen Demo -- CSS Motion Path offset-path animation](https://codepen.io/Chokcoco/pen/dyNaZea)

---

### @property ï¼Œè®©ä¸å¯èƒ½å˜å¯èƒ½

> @property CSS at-rule æ˜¯ CSS Houdini API çš„ä¸€éƒ¨åˆ†, å®ƒå…è®¸å¼€å‘è€…æ˜¾å¼åœ°å®šä¹‰ä»–ä»¬çš„ CSS è‡ªå®šä¹‰å±æ€§ï¼Œå…è®¸è¿›è¡Œå±æ€§ç±»å‹æ£€æŸ¥ã€è®¾å®šé»˜è®¤å€¼ä»¥åŠå®šä¹‰è¯¥è‡ªå®šä¹‰å±æ€§æ˜¯å¦å¯ä»¥è¢«ç»§æ‰¿ã€‚

###### è¯­æ³•

```scss
@property --property-name {
  syntax: '<color>';
  inherits: false;
  initial-value: #fff;
}

p {
  color: var(--property-name);
}
```

- @property --property-name ä¸­çš„ --property-name å°±æ˜¯è‡ªå®šä¹‰å±æ€§çš„åç§°ï¼Œå®šä¹‰åå¯åœ¨ CSS ä¸­é€šè¿‡ var(--property-name) è¿›è¡Œå¼•ç”¨
- syntaxï¼šè¯¥è‡ªå®šä¹‰å±æ€§çš„è¯­æ³•è§„åˆ™ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºè¡¨ç¤ºå®šä¹‰çš„è‡ªå®šä¹‰å±æ€§çš„ç±»å‹
- inheritsï¼šæ˜¯å¦å…è®¸ç»§æ‰¿
- initial-valueï¼šåˆå§‹å€¼

æ”¯æŒçš„ syntax è¯­æ³•ç±»å‹

```
length
number
percentage
length-percentage
color
image
url
integer
angle
time
resolution
transform-list
transform-function
custom-ident (a custom identifier string)
```

ä»–èƒ½å¸®æˆ‘ä»¬ä¸€äº›è§£å†³ css åŸç”Ÿä¸æ”¯æŒçš„åŠ¨ç”»é—®é¢˜

æ¯”å¦‚ï¼ŒCSS æ˜¯ä¸æ”¯æŒèƒŒæ™¯æ¸å˜è‰²çš„ç›´æ¥è¿‡æ¸¡å˜åŒ–çš„ï¼Œæˆ‘ä»¬å¾—åˆ°çš„åªæ˜¯ä¸¤å¸§ä¹‹é—´çš„ä¹‹é—´å˜åŒ–ã€‚

---

### ä½¿ç”¨ color syntax è¯­æ³•ç±»å‹ä½œç”¨äºæ¸å˜

> å®šä¹‰äº†ä¸¤ä¸ª CSS Houdini è‡ªå®šä¹‰å˜é‡ --houdini-colorA å’Œ --houdini-colorBï¼Œåœ¨ hover å˜åŒ–çš„æ—¶å€™ï¼Œæ”¹å˜è¿™ä¸¤ä¸ªé¢œè‰²ã€‚

```scss
@property --houdini-colorA {
  syntax: '<color>';
  inherits: false;
  initial-value: #fff;
}
@property --houdini-colorB {
  syntax: '<color>';
  inherits: false;
  initial-value: #000;
}
.property {
  background: linear-gradient(45deg, var(--houdini-colorA), var(--houdini-colorB));
  transition: 1s --houdini-colorA, 1s --houdini-colorB;

  &:hover {
    --houdini-colorA: #38f;
    --houdini-colorB: #3f8;
  }
}
```

transition: 1s --houdini-colorA, 1s --houdini-colorB é’ˆå¯¹ CSS Houdini è‡ªå®šä¹‰å˜é‡è®¾å®šè¿‡æ¸¡ï¼Œè€Œä¸æ˜¯é’ˆå¯¹ background è®¾å®šè¿‡æ¸¡åŠ¨ç”»

[codepen-property-demo](https://codepen.io/Chokcoco/pen/eYgyWLB?editors=1100)

## canvas

### ç‰¹ç‚¹

- æ•ˆç‡é«˜ã€æ€§èƒ½å¥½ã€å¯æ§æ€§é«˜ï¼Œåªèƒ½å¤„ç†ä½å›¾ï¼Œå†…å­˜å ç”¨æ’å®š
- ä¾èµ–åˆ†è¾¨ç‡
- ä¸æ”¯æŒäº‹ä»¶å¤„ç†å™¨
- å¼±çš„æ–‡æœ¬æ¸²æŸ“èƒ½åŠ›
- èƒ½å¤Ÿä»¥ .png æˆ– .jpg æ ¼å¼ä¿å­˜ç»“æœå›¾åƒ
- æœ€é€‚åˆå›¾åƒå¯†é›†å‹çš„æ¸¸æˆï¼Œå…¶ä¸­çš„è®¸å¤šå¯¹è±¡ä¼šè¢«é¢‘ç¹é‡ç»˜

### å®ç°

- åŸºæœ¬åŠ¨ç”»
- ç²’å­åŠ¨ç”»
- [ç‰©ç†åŠ¨ç”»](https://juejin.cn/post/6844904185121488910)

## Web Animation API(ç®€ç§° WAAPI)

> Web animation APIï¼Œç®€è¨€ä¹‹å°±æ˜¯æŠŠ CSS3 å®ç°çš„ animation åŠ¨ç”»å˜æˆç”± JS ä»£ç å®ç°ã€‚

```js
var myAnimation = element.animate(keyframes, options)

element.animate([{ opacity: 0 }, { opacity: 1, offset: 0.4 }, { opacity: 0 }], {
  duration: 3000,
  delay: 0,
  fill: 'forwards',
  easing: 'steps(8, end)',
  iterations: Infinity,
})
```

![](https://www.w3cplus.com/sites/default/files/blogs/2020/2007/create-highly-performant-animations-using-web-animations-api-and-reack-hooks-5.png)

_å…¼å®¹æ€§é—®é¢˜ï¼Œå¯ä»¥æ·»åŠ å«ç‰‡ polyfillï¼šweb-animations-js_

#### 1. åŠ¨æ€åˆ›å»º

CSS åŠ¨ç”»å¦‚æœç»™å®šåŠ¨ç”»çš„å¼€å§‹å€¼å’Œç»“æŸå€¼äº‹å…ˆä¸çŸ¥é“ï¼Œé‚£ä¹ˆå°±ä¼šéå¸¸æ£˜æ‰‹

#### 2. å›æ”¾æ§åˆ¶

Web Animation API æä¾›äº†ä¸€äº›æ§åˆ¶åŠ¨ç”»æ’­æ”¾çš„æœ‰ç”¨æ–¹æ³•ï¼Œæ¯”å¦‚ play()ã€pause()ã€reverse()å’Œ playbackRate

[codepen-WAAPI-æ§åˆ¶å‡½æ•°](https://codepen.io/wuw/pen/yLMqqZM?editors=0010)

#### 3. æ§åˆ¶ Web åŠ¨ç”»çš„ç”Ÿå‘½å‘¨æœŸ

ä¸¾ä¾‹ï¼šæ·¡å…¥æ·¡å‡º - css

```scss
@keyframes fadeOut {
  to { opacity: 0 }
}

element.style.animationName = "fadeOut";
element.addEventListener("animationend", event => {
  element.remove();
})
```

_åŠ¨ç”»äº‹ä»¶å†’æ³¡ï¼Œäº‹ä»¶å¯èƒ½æ¥è‡ªäº DOM å±‚æ¬¡ç»“æ„ä¸­ä¸€ä¸ªå­å…ƒç´ ä¸­å®Œæˆçš„åŠ¨ç”»ï¼ŒåŠ¨ç”»å¯ä»¥ä»¥åŒæ ·çš„æ–¹å¼å‘½å_

Web Animation API ä½¿ç”¨ promise æ¥ç›‘æ§åŠ¨ç”»çš„ ready å’Œ finished çŠ¶æ€ï¼š

```js
let animation = element.animate(
  {
    opacity: 0,
  },
  1000
)
animation.finished.then(() => {
  element.remove()
})
```

---

## FLIP å®ç° DOM åˆ‡æ¢åŠ¨ç”»

> FLIP æ˜¯ä¸€ç§è®°å¿†è®¾å¤‡å’ŒæŠ€æœ¯, æ¥æºäº Firstï¼ŒLastï¼ŒInvertï¼ŒPlay

##### First

æŒ‡çš„æ˜¯åœ¨ä»»ä½•äº‹æƒ…å‘ç”Ÿä¹‹å‰ï¼ˆè¿‡æ¸¡ä¹‹å‰ï¼‰ï¼Œè®°å½•å½“å‰å…ƒç´ çš„ä½ç½®å’Œå°ºå¯¸, å¯ä»¥ä½¿ç”¨ getBoundingClientRect()è¿™ä¸ª API æ¥å¤„ç†

```js
// è·å–å½“å‰å…ƒç´ çš„è¾¹ç•Œ

const first = el.getBoundingClientRect()
```

![](https://www.w3cplus.com/sites/default/files/blogs/2018/1812/flip-layout-5.png)

##### Last

æ‰§è¡Œä¸€æ®µä»£ç ï¼Œè®©å…ƒç´ å‘ç”Ÿç›¸åº”çš„å˜åŒ–ï¼Œå¹¶è®°å½•å…ƒç´ åœ¨æœ€åçŠ¶æ€çš„ä½ç½®å’Œå°ºå¯¸ï¼Œæ¯”å¦‚

```js
// é€šè¿‡ç»™å…ƒç´ æ·»åŠ ä¸€ä¸ªç±»åï¼Œè®¾ç½®å…ƒç´ æœ€åçŠ¶æ€çš„ä½ç½®å’Œå¤§å°

el.classList.add('totes-at-the-end')
```

##### Invert

å…ˆè®¡ç®—å‡ºä»åˆå§‹çŠ¶æ€åˆ°æœ€ç»ˆçŠ¶æ€å…ƒç´ å‘ç”Ÿçš„æ”¹å˜ï¼Œæ¯”å¦‚å®½åº¦ã€é«˜åº¦ã€é€æ˜åº¦ç­‰ï¼Œç„¶ååœ¨å…ƒç´ ä¸Šåº”ç”¨ä¸€ä¸ª transform æˆ– opacity ä½¿è¿™äº›æ”¹å˜åè½¬ã€‚å¦‚æœä¸€ä¸ªå…ƒç´ ç”±åˆå§‹çŠ¶æ€åˆ°æœ€ç»ˆçŠ¶æ€æ˜¯å‘ä¸‹ç§»åŠ¨äº† 90pxï¼Œé‚£å°±éœ€è¦å¯¹å…ƒç´ åº”ç”¨ transform: translate(0, -90px)ï¼Œè¿™æ ·å°±ä½¿å…ƒç´ çœ‹èµ·æ¥è¿˜åœ¨åˆå§‹ä½ç½®ã€‚

##### Play

ç§»é™¤å…ƒç´ ä¸Šçš„ transform å¹¶è®¾ç½® transform ç›¸å…³çš„åŠ¨ç”»ã€‚å¯ä»¥ä½¿ç”¨`Web Animations API`å®ç°

###### **FLIP æŠ€æœ¯å¯ä»¥ä»¥ä¸€ç§é«˜æ€§èƒ½çš„æ–¹å¼æ¥åŠ¨æ€çš„æ”¹å˜ DOM å…ƒç´ çš„ä½ç½®å’Œå°ºå¯¸ï¼Œè€Œä¸éœ€è¦ç®¡å®ƒçš„å¸ƒå±€æ˜¯å¦‚ä½•è®¡ç®—æˆ–æ¸²æŸ“çš„**

[vue å®˜æ–¹](https://cn.vuejs.org/v2/guide/transitions.html#%E5%88%97%E8%A1%A8%E7%9A%84%E6%8E%92%E5%BA%8F%E8%BF%87%E6%B8%A1)

---
title: ç¬¬29æœŸ
date: '2021-03-29'
tags: []
draft: false
---

<TOCInline toc={props.toc} asDisclosure toHeading={3} />

# 2021/03/25

## æ¯å‘¨èµ„è®¯ - ç¬¬`29`æœŸ

### 1. [ä¸€æ–‡åƒé€`React`é«˜é˜¶ç»„ä»¶(`HOC`) (ä¸Š)](https://juejin.cn/post/6940422320427106335)

_æœ¬æ–‡æ˜¯åœ¨æ˜¯å¤ªé•¿äº†ï¼Œåˆ†ä¸Šä¸‹ä¸¤ç¯‡è½¬è½½, ä¸Šç¯‡ä¸»è¦æ˜¯å¯¹é«˜é˜¶å‡½æ•°çš„åŸºç¡€ä»‹ç»ï¼Œä¸‹ç¯‡ä¸»è¦ä¸ºå®æˆ˜ï¼Œæœ‰å¤§é‡ä¼˜ç§€çš„ demo_

> é«˜é˜¶ç»„ä»¶ï¼ˆ`HOC`ï¼‰æ˜¯`React`ä¸­ç”¨äºå¤ç”¨ç»„ä»¶é€»è¾‘çš„ä¸€ç§é«˜çº§æŠ€å·§ã€‚`HOC`è‡ªèº«ä¸æ˜¯ `React API`çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒæ˜¯ä¸€ç§åŸºäº`React`çš„ç»„åˆç‰¹æ€§è€Œå½¢æˆçš„è®¾è®¡æ¨¡å¼ã€‚

æˆ‘ä»¬å¸¦ç€ä»¥ä¸‹å‡ ä¸ªé—®é¢˜æ¥è®¨è®ºï¼š

1. ä»€ä¹ˆæ˜¯é«˜é˜¶ç»„ä»¶ï¼Œå®ƒè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ
2. æœ‰å‡ ç§é«˜é˜¶ç»„ä»¶ï¼Œå®ƒä»¬ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ
3. å¦‚ä½•å†™ä¸€ä¸ªä¼˜ç§€é«˜é˜¶ç»„ä»¶ï¼Ÿ
4. `HOC`æ€ä¹ˆå¤„ç†é™æ€å±æ€§ï¼Œè·¨å±‚çº§`ref`ç­‰é—®é¢˜ï¼Ÿ
5. é«˜é˜¶ç»„ä»¶æ€ä¹ˆæ§åˆ¶æ¸²æŸ“ï¼Œéš”ç¦»æ¸²æŸ“ï¼Ÿ
6. é«˜é˜¶ç»„ä»¶æ€ä¹ˆç›‘æ§åŸå§‹ç»„ä»¶çš„çŠ¶æ€ï¼Ÿ

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7b05e1efc4e84808a0bb84c9cac4ab4b~tplv-k3u1fbpfcp-watermark.image)

#### å‡ ç§åŒ…è£…å¼ºåŒ–ç»„ä»¶çš„æ–¹å¼

##### 1. mixin æ¨¡å¼

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/faee9aa3049e4eb388ed76db4a8b6e64~tplv-k3u1fbpfcp-watermark.image)

è€ç‰ˆæœ¬çš„`react-mixins`
åœ¨`react`åˆæœŸæä¾›ä¸€ç§ç»„åˆæ–¹æ³•ã€‚é€šè¿‡`React.createClass`,åŠ å…¥`mixins`å±æ€§ï¼Œå…·ä½“ç”¨æ³•å’Œ`vue`ä¸­`mixins`ç›¸ä¼¼ã€‚å…·ä½“å®ç°å¦‚ä¸‹ï¼š

```jsx
const customMixin = {
  componentDidMount() {
    console.log('------componentDidMount------')
  },
  say() {
    console.log(this.state.name)
  },
}

const APP = React.createClass({
  mixins: [customMixin],
  getInitialState() {
    return {
      name: 'alien',
    }
  },
  render() {
    const { name } = this.state
    return <div> hello ,world , my name is {name} </div>
  },
})
```

è¿™ç§`mixins`åªèƒ½å­˜åœ¨`createClass`ä¸­ï¼Œåæ¥`React.createClass`è¿åŒ`mixins`è¿™ç§æ¨¡å¼è¢«åºŸå¼ƒäº†ã€‚`mixins`ä¼šå¸¦æ¥ä¸€äº›è´Ÿé¢çš„å½±å“ã€‚

1. `mixin`å¼•å…¥äº†éšå¼ä¾èµ–å…³ç³»ã€‚
2. ä¸åŒ`mixins`ä¹‹é—´å¯èƒ½ä¼šæœ‰å…ˆåé¡ºåºç”šè‡³ä»£ç å†²çªè¦†ç›–çš„é—®é¢˜
3. `mixin`ä»£ç ä¼šå¯¼è‡´æ»šé›ªçƒå¼çš„å¤æ‚æ€§

`createClass`çš„åºŸå¼ƒï¼Œä¸ä»£è¡¨`mixin`æ¨¡å¼é€€å‡º`react`èˆå°ï¼Œåœ¨æœ‰çŠ¶æ€ç»„ä»¶`class`ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åŸå‹é“¾ç»§æ‰¿æ¥å®ç°`mixins`ã€‚

##### 2. extends ç»§æ‰¿æ¨¡å¼

![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4e95476ddca44d2a88f21d97828030da~tplv-k3u1fbpfcp-watermark.image)

åœ¨`class`ç»„ä»¶ç››è¡Œä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç»§æ‰¿çš„æ–¹å¼è¿›ä¸€æ­¥çš„å¼ºåŒ–æˆ‘ä»¬çš„ç»„ä»¶ã€‚è¿™ç§æ¨¡å¼çš„å¥½å¤„åœ¨äºï¼Œå¯ä»¥å°è£…åŸºç¡€åŠŸèƒ½ç»„ä»¶ï¼Œç„¶åæ ¹æ®éœ€è¦å»`extends`æˆ‘ä»¬çš„åŸºç¡€ç»„ä»¶ï¼ŒæŒ‰éœ€å¼ºåŒ–ç»„ä»¶ï¼Œä½†æ˜¯å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¿…é¡»è¦å¯¹åŸºç¡€ç»„ä»¶æœ‰è¶³å¤Ÿçš„æŒæ¡ï¼Œå¦åˆ™ä¼šé€ æˆä¸€äº›åˆ—æ„æƒ³ä¸åˆ°çš„æƒ…å†µå‘ç”Ÿã€‚

```jsx
class Base extends React.Component {
  constructor() {
    super()
    this.state = {
      name: 'alien',
    }
  }

  say() {
    console.log('base components')
  }

  render() {
    return (
      <div>
        hello,world
        <button onClick={this.say.bind(this)}>ç‚¹å‡»</button>
      </div>
    )
  }
}

class Index extends Base {
  componentDidMount() {
    console.log(this.state.name)
  }

  say() {
    /* ä¼šè¦†ç›–åŸºç±»ä¸­çš„ say  */
    console.log('extends components')
  }
}

export default Index
```

##### 3. HOC æ¨¡å¼

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6b3c20e2a97e4a26814a70161edc96b1~tplv-k3u1fbpfcp-watermark.image)

`HOC`æ˜¯æˆ‘ä»¬æœ¬ç« ä¸»è¦çš„è®²çš„å†…å®¹ï¼Œå…ˆç®€å•å°è¯•ä¸€ä¸ª`HOC`ã€‚

```jsx
function HOC(Component) {
  return class wrapComponent extends React.Component {
    constructor() {
      super()
      this.state = {
        name: 'alien',
      }
    }
    render = () => <Component {...this.props} {...this.state} />
  }
}

@HOC
class Index extends React.Component {
  say() {
    const { name } = this.props
    console.log(name)
  }
  render() {
    return (
      <div>
        hello,world
        <button onClick={this.say.bind(this)}>ç‚¹å‡»</button>
      </div>
    )
  }
}
```

##### 4. è‡ªå®šä¹‰ hooks æ¨¡å¼

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bcaaa5ce7b5445fdab823bf385caf5e6~tplv-k3u1fbpfcp-watermark.image)

`hooks`çš„è¯ç”Ÿï¼Œä¸€å¤§éƒ¨åˆ†åŸå› æ˜¯è§£å†³**æ— çŠ¶æ€ç»„ä»¶æ²¡æœ‰`state`å’Œé€»è¾‘éš¾ä»¥å¤ç”¨é—®é¢˜**ã€‚`hooks`å¯ä»¥å°†ä¸€æ®µé€»è¾‘å°è£…èµ·æ¥ï¼Œåšåˆ°å¼€ç®±å³ç”¨ã€‚

ä¼ é€é—¨ï¼š

[ç©è½¬ react-hooks,è‡ªå®šä¹‰ hooks è®¾è®¡æ¨¡å¼åŠå…¶å®æˆ˜](https://juejin.cn/post/6890738145671938062)

[react-hooks å¦‚ä½•ä½¿ç”¨ï¼Ÿ](https://juejin.cn/post/6864438643727433741)

#### é«˜é˜¶ç»„ä»¶äº§ç”Ÿåˆè¡·

ç»„ä»¶æ˜¯æŠŠ`prop`æ¸²æŸ“æˆ`UI`,è€Œé«˜é˜¶ç»„ä»¶æ˜¯å°†ç»„ä»¶è½¬æ¢æˆå¦å¤–ä¸€ä¸ªç»„ä»¶ï¼Œæˆ‘ä»¬æ›´åº”è¯¥æ³¨æ„çš„æ˜¯ï¼Œç»è¿‡åŒ…è£…åçš„ç»„ä»¶ï¼Œè·å¾—äº†é‚£äº›å¼ºåŒ–,èŠ‚çœå¤šå°‘é€»è¾‘ï¼Œæˆ–æ˜¯è§£å†³äº†åŸæœ‰ç»„ä»¶çš„é‚£äº›ç¼ºé™·ï¼Œè¿™å°±æ˜¯é«˜é˜¶ç»„ä»¶çš„æ„ä¹‰ã€‚æˆ‘ä»¬å…ˆæ¥æ€è€ƒä¸€ä¸‹é«˜é˜¶ç»„ä»¶ç©¶ç«Ÿè§£å†³äº†ä»€ä¹ˆé—®é¢˜ ğŸ¤”ğŸ¤”ğŸ¤”ï¼Ÿ

1. å¤ç”¨é€»è¾‘ï¼šé«˜é˜¶ç»„ä»¶æ›´åƒæ˜¯ä¸€ä¸ªåŠ å·¥`react`ç»„ä»¶çš„å·¥å‚ï¼Œæ‰¹é‡å¯¹åŸæœ‰ç»„ä»¶è¿›è¡ŒåŠ å·¥ï¼ŒåŒ…è£…å¤„ç†ã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚å®šåˆ¶åŒ–ä¸“å±çš„`HOC`,è¿™æ ·å¯ä»¥è§£å†³å¤ç”¨é€»è¾‘ã€‚
2. å¼ºåŒ–`props`ï¼šè¿™ä¸ªæ˜¯`HOC`æœ€å¸¸ç”¨çš„ç”¨æ³•ä¹‹ä¸€ï¼Œé«˜é˜¶ç»„ä»¶è¿”å›çš„ç»„ä»¶ï¼Œå¯ä»¥åŠ«æŒä¸Šä¸€å±‚ä¼ è¿‡æ¥çš„`props`,ç„¶åæ··å…¥æ–°çš„`props`,æ¥å¢å¼ºç»„ä»¶çš„åŠŸèƒ½ã€‚ä»£è¡¨ä½œ`react-router`ä¸­çš„`withRouter`ã€‚
3. èµ‹èƒ½ç»„ä»¶ï¼š`HOC`æœ‰ä¸€é¡¹ç‹¬ç‰¹çš„ç‰¹æ€§ï¼Œå°±æ˜¯å¯ä»¥ç»™è¢«`HOC`åŒ…è£¹çš„ä¸šåŠ¡ç»„ä»¶ï¼Œæä¾›ä¸€äº›æ‹“å±•åŠŸèƒ½ï¼Œæ¯”å¦‚è¯´é¢å¤–çš„ç”Ÿå‘½å‘¨æœŸï¼Œé¢å¤–çš„äº‹ä»¶ï¼Œä½†æ˜¯è¿™ç§`HOC`ï¼Œå¯èƒ½éœ€è¦å’Œä¸šåŠ¡ç»„ä»¶ç´§å¯†ç»“åˆã€‚å…¸å‹æ¡ˆä¾‹`react-keepalive-router`ä¸­çš„`keepaliveLifeCycle`å°±æ˜¯é€šè¿‡`HOC`æ–¹å¼ï¼Œç»™ä¸šåŠ¡ç»„ä»¶å¢åŠ äº†é¢å¤–çš„ç”Ÿå‘½å‘¨æœŸã€‚
4. æ§åˆ¶æ¸²æŸ“ï¼šåŠ«æŒæ¸²æŸ“æ˜¯`hoc`ä¸€ä¸ªç‰¹æ€§ï¼Œåœ¨`wrapComponent`åŒ…è£…ç»„ä»¶ä¸­ï¼Œå¯ä»¥å¯¹åŸæ¥çš„ç»„ä»¶ï¼Œè¿›è¡Œæ¡ä»¶æ¸²æŸ“ï¼ŒèŠ‚æµæ¸²æŸ“ï¼Œæ‡’åŠ è½½ç­‰åŠŸèƒ½ï¼Œåé¢ä¼šè¯¦ç»†è®²è§£ï¼Œå…¸å‹ä»£è¡¨åš`react-redux`ä¸­`connect`å’Œ`dva`ä¸­`dynamic`ç»„ä»¶æ‡’åŠ è½½ã€‚

æˆ‘ä¼šé’ˆå¯¹é«˜é˜¶ç»„ä»¶çš„åˆè¡·å±•å¼€ï¼Œè¯¦ç»†ä»‹ç»å…¶åŸç†å·²ç»ç”¨æ³•ã€‚è·Ÿä¸Šæˆ‘çš„æ€è·¯ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ï¼Œé«˜é˜¶ç»„ä»¶**å¦‚ä½•åœ¨æˆ‘ä»¬çš„ä¸šåŠ¡ç»„ä»¶ä¸­ä½¿ç”¨çš„**ã€‚

#### é«˜é˜¶ç»„ä»¶ä½¿ç”¨å’Œç¼–å†™ç»“æ„

##### ä½¿ç”¨ï¼šè£…é¥°å™¨æ¨¡å¼å’Œå‡½æ•°åŒ…è£¹æ¨¡å¼

å¯¹äº`class`å£°æ˜çš„æœ‰çŠ¶æ€ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨è£…é¥°å™¨æ¨¡å¼ï¼Œå¯¹ç±»ç»„ä»¶è¿›è¡ŒåŒ…è£…ï¼š

```jsx
@withStyles(styles)
@withRouter
@keepaliveLifeCycle
class Index extends React.Componen {
  /* ... */
}
```

æˆ‘ä»¬è¦æ³¨æ„ä¸€ä¸‹åŒ…è£…é¡ºåºï¼Œè¶Šé è¿‘ Index ç»„ä»¶çš„ï¼Œå°±æ˜¯è¶Šå†…å±‚çš„ HOC,ç¦»ç»„ä»¶ Index ä¹Ÿå°±è¶Šè¿‘ã€‚

å¯¹äºæ— çŠ¶æ€ç»„ä»¶(å‡½æ•°å£°æ˜ï¼‰æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™ï¼š

```jsx
function Index() {
  /* .... */
}
export default withStyles(styles)(withRouter(keepaliveLifeCycle(Index)))
```

##### æ¨¡å‹ï¼šåµŒå¥— HOC

å¯¹äºä¸éœ€è¦ä¼ é€’å‚æ•°çš„`HOC`ï¼Œæˆ‘ä»¬ç¼–å†™æ¨¡å‹æˆ‘ä»¬åªéœ€è¦åµŒå¥—ä¸€å±‚å°±å¯ä»¥ï¼Œæ¯”å¦‚`withRouter`

```jsx
function withRouter() {
  return class wrapComponent extends React.Component {
    /* ç¼–å†™é€»è¾‘ */
  }
}
```

å¯¹äºéœ€è¦å‚æ•°çš„`HOC`ï¼Œæˆ‘ä»¬éœ€è¦ä¸€å±‚ä»£ç†ï¼Œå¦‚ä¸‹ï¼š

```jsx
function connect(mapStateToProps) {
  /* æ¥å—ç¬¬ä¸€ä¸ªå‚æ•° */
  return function connectAdvance(wrapCompoent) {
    /* æ¥å—ç»„ä»¶ */
    return class WrapComponent extends React.Component {}
  }
}
```

æˆ‘ä»¬çœ‹å‡ºä¸¤ç§`HOC`æ¨¡å‹å¾ˆç®€å•ï¼Œå¯¹äºä»£ç†å‡½æ•°ï¼Œå¯èƒ½æœ‰ä¸€å±‚ï¼Œå¯èƒ½æœ‰å¾ˆå¤šå±‚ï¼Œä¸è¿‡ä¸è¦æ€•ï¼Œæ— è®ºå¤šå°‘å±‚æœ¬è´¨ä¸Šéƒ½æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€å±‚ä¸€å±‚å‰¥ç¦»å¼€ï¼Œåˆ†æç»“æ„ï¼Œæ•´ä¸ª`HOC`ç»“æ„å’Œè„‰ç»œå°±ä¼šæ¸…æ™°å¯è§ã€‚åƒé€`HOC`ä¹Ÿå°±æ˜“å¦‚åæŒã€‚

#### ä¸¤ç§ä¸åŒçš„é«˜é˜¶ç»„ä»¶

å¸¸ç”¨çš„é«˜é˜¶ç»„ä»¶æœ‰ä¸¤ç§æ–¹å¼**æ­£å‘çš„å±æ€§ä»£ç†**å’Œ**åå‘çš„ç»„ä»¶ç»§æ‰¿**ï¼Œä¸¤è€…ä¹‹å‰æœ‰ä¸€äº›å…±æ€§å’ŒåŒºåˆ«ã€‚æ¥ä¸‹å…·ä½“ä»‹ç»ä¸¤è€…åŒºåˆ«ï¼Œåœ¨ä¸‹æ–‡ä¼šè¯¦ç»†ä»‹ç»å…·ä½“å®ç°ã€‚

##### æ­£å‘å±æ€§ä»£ç†

æ‰€è°“æ­£å‘å±æ€§ä»£ç†ï¼Œå°±æ˜¯ç”¨ç»„ä»¶åŒ…è£¹ä¸€å±‚ä»£ç†ç»„ä»¶ï¼Œåœ¨ä»£ç†ç»„ä»¶ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥åšä¸€äº›ï¼Œå¯¹æºç»„ä»¶çš„ä»£ç†æ“ä½œã€‚åœ¨`fiber tree`ä¸Šï¼Œå…ˆ`mounted`ä»£ç†ç»„ä»¶ï¼Œç„¶åæ‰æ˜¯æˆ‘ä»¬çš„ä¸šåŠ¡ç»„ä»¶ã€‚æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºçˆ¶å­ç»„ä»¶å…³ç³»ï¼Œçˆ¶ç»„ä»¶å¯¹å­ç»„ä»¶è¿›è¡Œä¸€ç³»åˆ—å¼ºåŒ–æ“ä½œã€‚

###### ä¼˜ç‚¹

1. æ­£å¸¸å±æ€§ä»£ç†å¯ä»¥å’Œä¸šåŠ¡ç»„ä»¶ä½è€¦åˆï¼Œé›¶è€¦åˆï¼Œå¯¹äºæ¡ä»¶æ¸²æŸ“å’Œ`props`å±æ€§å¢å¼º,åªè´Ÿè´£æ§åˆ¶å­ç»„ä»¶æ¸²æŸ“å’Œä¼ é€’é¢å¤–çš„`props`å°±å¯ä»¥ï¼Œæ‰€ä»¥æ— é¡»çŸ¥é“ï¼Œä¸šåŠ¡ç»„ä»¶åšäº†äº›ä»€ä¹ˆã€‚æ‰€ä»¥æ­£å‘å±æ€§ä»£ç†ï¼Œæ›´é€‚åˆåšä¸€äº›å¼€æºé¡¹ç›®çš„`HOC`ï¼Œç›®å‰å¼€æºçš„ HOC åŸºæœ¬éƒ½æ˜¯é€šè¿‡è¿™ä¸ªæ¨¡å¼å®ç°çš„ã€‚
2. åŒæ ·é€‚ç”¨äº`class`å£°æ˜ç»„ä»¶ï¼Œå’Œ`function`å£°æ˜çš„ç»„ä»¶ã€‚
3. å¯ä»¥å®Œå…¨éš”ç¦»ä¸šåŠ¡ç»„ä»¶çš„æ¸²æŸ“,ç›¸æ¯”åå‘ç»§æ‰¿ï¼Œå±æ€§ä»£ç†è¿™ç§æ¨¡å¼ã€‚å¯ä»¥å®Œå…¨æ§åˆ¶ä¸šåŠ¡ç»„ä»¶æ¸²æŸ“ä¸å¦ï¼Œå¯ä»¥é¿å…åå‘ç»§æ‰¿å¸¦æ¥ä¸€äº›å‰¯ä½œç”¨ï¼Œæ¯”å¦‚ç”Ÿå‘½å‘¨æœŸçš„æ‰§è¡Œã€‚
4. å¯ä»¥åµŒå¥—ä½¿ç”¨ï¼Œ`HOC`ï¼Œè€Œä¸”ä¸€èˆ¬ä¸ä¼šé™åˆ¶åŒ…è£…`HOC`çš„å…ˆåé¡ºåºã€‚

###### ç¼ºç‚¹

1. ä¸€èˆ¬æ— æ³•ç›´æ¥è·å–ä¸šåŠ¡ç»„ä»¶çš„çŠ¶æ€ï¼Œå¦‚æœæƒ³è¦è·å–ï¼Œéœ€è¦`ref`è·å–ç»„ä»¶å®ä¾‹ã€‚
2. æ— æ³•ç›´æ¥ç»§æ‰¿é™æ€å±æ€§ã€‚å¦‚æœéœ€è¦ç»§æ‰¿éœ€è¦æ‰‹åŠ¨å¤„ç†ï¼Œæˆ–è€…å¼•å…¥ç¬¬ä¸‰æ–¹åº“ã€‚

```jsx
class Index extends React.Component {
  render() {
    return <div> hello,world </div>
  }
}
Index.say = function () {
  console.log('my name is alien')
}
function HOC(Component) {
  return class wrapComponent extends React.Component {
    render() {
      return <Component {...this.props} {...this.state} />
    }
  }
}
const newIndex = HOC(Index)
console.log(newIndex.say)
```

![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7c907c7605494955b4d5b8170f847a68~tplv-k3u1fbpfcp-watermark.image)

##### åå‘ç»§æ‰¿

##### ä¼˜ç‚¹

1. æ–¹ä¾¿è·å–ç»„ä»¶å†…éƒ¨çŠ¶æ€ï¼Œæ¯”å¦‚`state`ï¼Œ`props`,ç”Ÿå‘½å‘¨æœŸ,ç»‘å®šçš„äº‹ä»¶å‡½æ•°ç­‰
2. `es6`ç»§æ‰¿å¯ä»¥è‰¯å¥½ç»§æ‰¿é™æ€å±æ€§ã€‚æˆ‘ä»¬æ— é¡»å¯¹é™æ€å±æ€§å’Œæ–¹æ³•è¿›è¡Œé¢å¤–çš„å¤„ç†ã€‚

##### ç¼ºç‚¹

1. æ— çŠ¶æ€ç»„ä»¶æ— æ³•ä½¿ç”¨ã€‚
2. å’Œè¢«åŒ…è£…çš„ç»„ä»¶å¼ºè€¦åˆï¼Œéœ€è¦çŸ¥é“è¢«åŒ…è£…çš„ç»„ä»¶çš„å†…éƒ¨çŠ¶æ€ï¼Œå…·ä½“æ˜¯åšä»€ä¹ˆï¼Ÿ
3. å¦‚æœå¤šä¸ªåå‘ç»§æ‰¿`HOC`åµŒå¥—åœ¨ä¸€èµ·ï¼Œå½“å‰çŠ¶æ€ä¼šè¦†ç›–ä¸Šä¸€ä¸ªçŠ¶æ€ã€‚è¿™æ ·å¸¦æ¥çš„éšæ‚£æ˜¯éå¸¸å¤§çš„ï¼Œæ¯”å¦‚è¯´æœ‰å¤šä¸ª`componentDidMount`ï¼Œå½“å‰`componentDidMount`ä¼šè¦†ç›–ä¸Šä¸€ä¸ª`componentDidMount`ã€‚è¿™æ ·å‰¯ä½œç”¨ä¸²è”èµ·æ¥ï¼Œå½±å“å¾ˆå¤§ã€‚

```jsx
class Index extends React.Component {
  render() {
    return <div> hello,world </div>
  }
}
Index.say = function () {
  console.log('my name is alien')
}
function HOC(Component) {
  return class wrapComponent extends Component {}
}
const newIndex = HOC(Index)
console.log(newIndex.say)
```

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2619fd18f75d47e7b7991858aac0b10c~tplv-k3u1fbpfcp-watermark.image)

#### å¦‚ä½•ç¼–å†™é«˜é˜¶ç»„ä»¶

##### 1. å¼ºåŒ– props

###### æ··å…¥ props

è¿™ä¸ªæ˜¯é«˜é˜¶ç»„ä»¶æœ€å¸¸ç”¨çš„åŠŸèƒ½ï¼Œæ‰¿æ¥ä¸Šå±‚çš„`props`,åœ¨æ··å…¥è‡ªå·±çš„`props`ï¼Œæ¥å¼ºåŒ–ç»„ä»¶ã€‚

```jsx
// æœ‰çŠ¶æ€ç»„ä»¶
function classHOC(WrapComponent) {
  return class Index extends React.Component {
    state = {
      name: 'alien',
    }
    componentDidMount() {
      console.log('HOC')
    }
    render() {
      return <WrapComponent {...this.props} {...this.state} />
    }
  }
}
function Index(props) {
  const { name } = props
  useEffect(() => {
    console.log('index')
  }, [])

  return <div>hello,world , my name is {name}</div>
}

export default classHOC(Index)

// æ— çŠ¶æ€ç»„ä»¶
function functionHoc(WrapComponent) {
  return function Index(props) {
    const [state, setState] = useState({ name: 'alien' })
    return <WrapComponent {...props} {...state} />
  }
}
```

##### 2. æŠ½ç¦» state æ§åˆ¶æ›´æ–°

é«˜é˜¶ç»„ä»¶å¯ä»¥å°†`HOC`çš„`state`çš„é…åˆèµ·æ¥ï¼Œæ§åˆ¶ä¸šåŠ¡ç»„ä»¶çš„æ›´æ–°ã€‚è¿™ç§ç”¨æ³•åœ¨`react-redux`ä¸­`connect`é«˜é˜¶ç»„ä»¶ä¸­ç”¨åˆ°è¿‡ï¼Œç”¨äºå¤„ç†æ¥è‡ª`redux`ä¸­`state`æ›´æ”¹ï¼Œå¸¦æ¥çš„è®¢é˜…æ›´æ–°ä½œç”¨ã€‚

```jsx
function classHOC(WrapComponent) {
  return class Idex extends React.Component {
    constructor() {
      super()
      this.state = {
        name: 'alien',
      }
    }
    changeName(name) {
      this.setState({ name })
    }
    render() {
      return (
        <WrapComponent {...this.props} {...this.state} changeName={this.changeName.bind(this)} />
      )
    }
  }
}
function Index(props) {
  const [value, setValue] = useState(null)
  const { name, changeName } = props
  return (
    <div>
      <div> hello,world, my name is {name}</div>
      æ”¹å˜name <input onChange={(e) => setValue(e.target.value)} />
      <button onClick={() => changeName(value)}>ç¡®å®š</button>
    </div>
  )
}

export default classHOC(Index)
```

#### æ¥æº

- [ã€Œreact è¿›é˜¶ã€ä¸€æ–‡åƒé€ React é«˜é˜¶ç»„ä»¶(HOC) - æˆ‘ä¸æ˜¯å¤–æ˜Ÿäºº](https://juejin.cn/post/6940422320427106335)

### 2. [å‰ç«¯ä¼˜ç§€å®è·µä¸å®Œå…¨æŒ‡å—](https://juejin.cn/post/6932647134944886797)

æœ¬æ–‡å…¶å®åº”è¯¥å«ï¼Œ`Web`ç”¨æˆ·ä½“éªŒè®¾è®¡æå‡æŒ‡å—ã€‚

æ‰€è°“çš„ç”¨æˆ·ä½“éªŒè®¾è®¡ï¼Œå…¶å®æ˜¯ä¸€ä¸ªæ¯”è¾ƒè™šçš„æ¦‚å¿µï¼Œæ˜¯ç§‰æ‰¿ç€ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„æ€æƒ³çš„ä¸€ç§è®¾è®¡æ‰‹æ®µï¼Œä»¥ç”¨æˆ·éœ€æ±‚ä¸ºç›®æ ‡è€Œè¿›è¡Œçš„è®¾è®¡ã€‚è®¾è®¡è¿‡ç¨‹æ³¨é‡ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒï¼Œç”¨æˆ·ä½“éªŒçš„æ¦‚å¿µä»å¼€å‘çš„æœ€æ—©æœŸå°±å¼€å§‹è¿›å…¥æ•´ä¸ªæµç¨‹ï¼Œå¹¶è´¯ç©¿å§‹ç»ˆã€‚ è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒè®¾è®¡â€¦

#### æ¥æº

- [å‰ç«¯ä¼˜ç§€å®è·µä¸å®Œå…¨æŒ‡å—](https://juejin.cn/post/6932647134944886797)

## 30 seconds of code

### ç›®æ ‡

è®¡ç®—ä¸¤ä¸ªæ•°ç»„çš„ç¬›å¡å°”ç§¯ã€‚

### æ ·ä¾‹è¾“å‡º:

```js
const cartesianProduct = (a, b) => a.reduce((p, x) => [...p, ...b.map((y) => [x, y])], [])
```

### å‚è€ƒå®ç°

```js
cartesianProduct(['x', 'y'], [1, 2])
// [['x', 1], ['x', 2], ['y', 1], ['y', 2]]
```

## æ¯æ—¥ä¸€é—®

> ä»¥ä¸‹ä»£ç çš„è¿è¡Œç»“æœä¸º

```js
if ('http://giftwrapped.com/picture.jpg'.match('.gif')) {
  ;('a gif file')
} else {
  ;('not a gif file')
}
```

## æ¯æ—¥äºŒé—®

> ä»¥ä¸‹ä»£ç çš„è¿è¡Œç»“æœä¸º

```js
;[, , ,].join(',')
```

### ä¸ŠæœŸçš„ç­”æ¡ˆ

#### ç¬¬ä¸€é¢˜

> ä»¥ä¸‹ä»£ç çš„è¿è¡Œç»“æœä¸º

```js
var val = 'smtg'
console.log('Value is ' + (val === 'smtg') ? 'Something' : 'Nothing')
```

- ç­”æ¡ˆï¼šSomething
- è§£æï¼šå­—ç¬¦ä¸²è¿æ¥æ¯”ä¸‰å…ƒè¿ç®—æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§
  æ‰€ä»¥åŸé¢˜ç­‰ä»·äº 'Value is true' ? 'Somthing' : 'Nonthing'
  è€Œä¸æ˜¯ 'Value is' + (true ? 'Something' : 'Nonthing')
- å·©å›ºï¼š[Like Sunday, Like Rain - JavaScript è¿ç®—ç¬¦ä¼˜å…ˆçº§](https://juejin.cn/post/6844903620882726920/)

```
    1 || fn() && fn()   //1
    1 || 1 ? 2 : 3 ;    //2
```

#### ç¬¬äºŒé¢˜

> ä»¥ä¸‹ä»£ç çš„è¿è¡Œç»“æœä¸º

```js
Number.MIN_VALUE > 0
```

- ç­”æ¡ˆï¼štrue
- è§£æï¼šMIN_VALUE å±æ€§æ˜¯ JavaScript ä¸­å¯è¡¨ç¤ºçš„æœ€å°çš„æ•°ï¼ˆæ¥è¿‘ 0 ï¼Œä½†ä¸æ˜¯è´Ÿæ•°ï¼‰ã€‚å®ƒçš„è¿‘ä¼¼å€¼ä¸º 5 x 10-324ã€‚

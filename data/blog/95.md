---
title: ç¬¬95æœŸ
date: '2021-12-01'
tags: ['èµ„è®¯']
draft: false
---

<TOCInline toc={props.toc} asDisclosure toHeading={3} />

## 2021/12/01

## æ¯å‘¨èµ„è®¯ - ç¬¬`95`æœŸ

### 1. ä½ å†™è¿‡çš„ä»£ç éƒ½é€ƒä¸è¿‡è¿™ä¸¤æ–¹é¢ï¼šAPI å’ŒæŠ½è±¡

ä½œä¸ºå‰ç«¯ï¼Œä½ å¯èƒ½å¼€å‘è¿‡ Electron æ¡Œé¢åº”ç”¨ã€å°ç¨‹åºã€æµè§ˆå™¨ä¸Šçš„ web åº”ç”¨ã€åŸºäº React Native ç­‰è·¨ç«¯å¼•æ“çš„ appï¼ŒåŸºäº Node.js çš„å·¥å…·æˆ–è€…æœåŠ¡ç­‰å„ç§åº”ç”¨ï¼Œè¿™äº›éƒ½æ˜¯ JS çš„ä¸åŒçš„ runtimeï¼Œå¼€å‘ä¹Ÿéƒ½æ˜¯åŸºäºå‰ç«¯é‚£å¥—æŠ€æœ¯ã€‚

é¢å¯¹è¿™ä¹ˆå¤šçš„ç»†åˆ†é¢†åŸŸï¼Œä½œä¸ºå‰ç«¯å·¥ç¨‹å¸ˆçš„ä½ æ˜¯å¦æ›¾è¿·èŒ«è¿‡ï¼šè¿™ä¹ˆå¤šæŠ€æœ¯æˆ‘è¯¥å­¦ä»€ä¹ˆï¼Ÿä»–ä»¬ä¸­æœ‰æ²¡æœ‰ä»€ä¹ˆæœ¬è´¨çš„ä¸œè¥¿å‘¢ï¼Ÿ

å…¶å®æ‰€æœ‰çš„è¿™äº›æŠ€æœ¯ï¼Œä½ å†™è¿‡çš„æ‰€æœ‰ä»£ç ï¼Œéƒ½å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªæ–¹é¢ï¼šapi å’Œ æŠ½è±¡ã€‚

#### api

ä¸åŒå¹³å°æä¾›çš„ api ä¸åŒï¼Œæ”¯æŒçš„èƒ½åŠ›ä¸åŒï¼š

æµè§ˆå™¨æä¾›äº† dom apiã€æ”¯æŒäº† css çš„æ¸²æŸ“ï¼Œè¿˜æä¾›äº†éŸ³è§†é¢‘ã€webgl ç­‰ç›¸å…³ apiï¼Œè¿™äº› api æ˜¯æˆ‘ä»¬å¼€å‘å‰ç«¯åº”ç”¨çš„åŸºç¡€ã€‚

Node.js æä¾›äº†æ“ä½œç³»ç»Ÿèƒ½åŠ›çš„ apiï¼Œæ¯”å¦‚è¿›ç¨‹ã€çº¿ç¨‹ã€ç½‘ç»œã€æ–‡ä»¶ç­‰ï¼Œè¿™äº› api æ˜¯æˆ‘ä»¬å¼€å‘å·¥å…·é“¾æˆ–åç«¯åº”ç”¨çš„åŸºç¡€ã€‚

React Native ç­‰è·¨ç«¯å¼•æ“æ”¯æŒäº† css çš„æ¸²æŸ“ï¼Œè¿˜æä¾›äº†è®¾å¤‡èƒ½åŠ›çš„ apiï¼Œæ¯”å¦‚ç…§ç›¸æœºã€é—ªå…‰ç¯ã€ä¼ æ„Ÿå™¨ã€GPS ç­‰ apiï¼Œè¿™æ˜¯æˆ‘ä»¬å¼€å‘ç§»åŠ¨ app çš„åŸºç¡€ã€‚

Electron é›†æˆäº† Chromium å’Œ Node.jsï¼ŒåŒæ—¶è¿˜æä¾›äº†æ¡Œé¢ç›¸å…³çš„ apiã€‚

å°ç¨‹åºæ”¯æŒäº† css çš„æ¸²æŸ“ä¹‹å¤–ï¼Œè¿˜æä¾›äº†ä¸€äº›å®¿ä¸» app èƒ½åŠ›çš„ apiã€‚

æ­¤å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šçš„ runtimeï¼Œæ¯”å¦‚ vscode æ’ä»¶ã€sketch æ’ä»¶ç­‰ï¼Œéƒ½æœ‰å„è‡ªèƒ½å¤Ÿä½¿ç”¨çš„ apiã€‚

ä¸åŒçš„ JS runtime æä¾›äº†ä¸åŒ api ç»™ä¸Šå±‚åº”ç”¨ï¼Œè¿™æ˜¯åº”ç”¨å¼€å‘çš„åŸºç¡€ï¼Œä¹Ÿæ˜¯åº”ç”¨å¼€å‘çš„èƒ½åŠ›è¾¹ç•Œã€‚

#### æŠ½è±¡

åŸºäº runtime æä¾›çš„ api æˆ‘ä»¬å°±èƒ½å®Œæˆåº”ç”¨çš„åŠŸèƒ½å¼€å‘ï¼Œä½†æ˜¯å¤æ‚åœºæ™¯ä¸‹å¾€å¾€ä¼šåšä¸€äº›æŠ½è±¡ã€‚

æ¯”å¦‚æµè§ˆå™¨ä¸Šçš„å‰ç«¯åº”ç”¨ä¸»è¦æ˜¯æŠŠæ•°æ®é€šè¿‡ dom api å’Œ css æ¸²æŸ“å‡ºæ¥ï¼Œå¹¶åšä¸€äº›äº¤äº’ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æŠ½è±¡å‡ºäº†æ•°æ®é©±åŠ¨çš„å‰ç«¯æ¡†æ¶ï¼ŒæŠ½è±¡å‡ºäº†ç»„ä»¶ã€çŠ¶æ€ã€æ•°æ®æµç­‰æ¦‚å¿µã€‚ä¹‹åå°±å¯ä»¥æŠŠä¸åŒçš„éœ€æ±‚æŠ½è±¡ä¸ºä¸åŒçš„ç»„ä»¶ã€çŠ¶æ€ã€‚

ç»è¿‡å±‚å±‚æŠ½è±¡ä¹‹åï¼Œå¼€å‘å¤æ‚å‰ç«¯åº”ç”¨çš„æ—¶å€™ä»£ç æ›´å®¹æ˜“ç»´æŠ¤ã€æˆæœ¬æ›´ä½ã€‚

æ¯”å¦‚åŸºäº Node.js çš„ fsã€netã€http ç­‰ api æˆ‘ä»¬å°±èƒ½å®ç° web serverï¼Œä½†æ˜¯å¯¹äºå¤æ‚çš„ä¼ä¸šçº§åº”ç”¨ï¼Œæˆ‘ä»¬é€šè¿‡åç«¯æ¡†æ¶åš MVC çš„æŠ½è±¡ï¼ŒæŠ½è±¡å‡ºæ§åˆ¶å™¨ã€æœåŠ¡ã€æ¨¡å‹ã€è§†å›¾ç­‰æ¦‚å¿µã€‚ä¹‹åçš„åç«¯ä»£ç å°±å¯ä»¥æŠŠéœ€æ±‚æŠ½è±¡ä¸ºä¸åŒçš„æ§åˆ¶å™¨å’ŒæœåŠ¡ã€‚

ç»è¿‡ MVC çš„æŠ½è±¡ä¹‹åï¼Œåç«¯åº”ç”¨çš„åˆ†å±‚æ›´æ¸…æ™°ã€æ›´å®¹æ˜“ç»´æŠ¤å’Œæ‰©å±•ã€‚

å¤æ‚çš„åº”ç”¨éœ€è¦åœ¨ api çš„åŸºç¡€ä¸Šåšä¸€äº›æŠ½è±¡ã€‚æˆ‘ä»¬å¾€å¾€ä¼šç”¨æ¡†æ¶åšä¸€å±‚æŠ½è±¡ï¼Œç„¶åè‡ªå·±å†åšä¸€å±‚æŠ½è±¡ï¼Œç»è¿‡å±‚å±‚æŠ½è±¡ä¹‹åçš„ä»£ç æ˜¯æ›´å®¹æ˜“ç»´æŠ¤å’Œæ‰©å±•çš„ã€‚è¿™ä¹Ÿå°±æ˜¯æ‰€è°“çš„æ¶æ„ã€‚

#### å¦‚ä½•æ·±å…¥ api å’ŒæŠ½è±¡

##### api

api æ˜¯å¯¹æ“ä½œç³»ç»Ÿèƒ½åŠ›æˆ–ä¸åŒé¢†åŸŸèƒ½åŠ›çš„å°è£…ã€‚

æ¯”å¦‚ Node.js çš„è¿›ç¨‹ã€çº¿ç¨‹ã€æ–‡ä»¶ã€ç½‘ç»œçš„ api æ˜¯å¯¹æ“ä½œç³»ç»Ÿèƒ½åŠ›çš„å°è£…ï¼Œæƒ³æ·±å…¥å®ƒä»¬å°±è¦å»å­¦ä¹ æ“ä½œç³»ç»Ÿçš„ä¸€äº›åŸç†ã€‚

è€Œ webglã€éŸ³è§†é¢‘ç­‰ api åˆ™åˆ†åˆ«æ˜¯å¯¹å›¾å½¢å­¦ã€éŸ³è§†é¢‘ç­‰é¢†åŸŸçš„èƒ½åŠ›çš„å°è£…ï¼Œæƒ³è¦æ·±å…¥å®ƒä»¬å°±è¦å»å­¦ä¹ è¿™äº›é¢†åŸŸçš„ä¸€äº›åŸç†ã€‚

ä¸ªäººè§‰å¾—æˆ‘ä»¬çŸ¥é“ api æä¾›äº†ä»€ä¹ˆèƒ½åŠ›å°±è¡Œï¼Œæ²¡å¿…è¦è¿‡åº¦æ·±å…¥ api çš„å®ç°åŸç†ã€‚

##### æŠ½è±¡

æŠ½è±¡æ˜¯åŸºäºç¼–ç¨‹è¯­è¨€çš„ç¼–ç¨‹èŒƒå¼ï¼Œé’ˆå¯¹ä¸åŒç›®æ ‡åšçš„è®¾è®¡ã€‚

Javascript æä¾›äº†é¢å‘å¯¹è±¡ã€å‡½æ•°å¼ç­‰ç¼–ç¨‹èŒƒå¼ï¼Œé‚£ä¹ˆå°±å¯ä»¥åŸºäºå¯¹è±¡æ¥åšæŠ½è±¡ï¼Œä½¿ç”¨é¢å‘å¯¹è±¡çš„å„ç§è®¾è®¡æ¨¡å¼ï¼Œæˆ–è€…åŸºäºå‡½æ•°å¼é‚£ä¸€å¥—ã€‚è¿™æ˜¯æŠ½è±¡çš„åŸºç¡€ã€‚

æŠ½è±¡æ˜¯æ ¹æ®ä¸åŒçš„ç›®æ ‡æ¥åšçš„ã€‚

å‰ç«¯é¢†åŸŸä¸»è¦æ˜¯è¦åˆ†ç¦» dom æ“ä½œå’Œæ•°æ®ï¼ŒæŠŠé¡µé¢æŒ‰ç…§åŠŸèƒ½åšåˆ’åˆ†ï¼Œæ‰€ä»¥æ ¹æ®è¿™äº›ç›®æ ‡å°±åšäº† mvvm å’Œç»„ä»¶åŒ–çš„æŠ½è±¡ã€‚

åç«¯é¢†åŸŸä¸»è¦æ˜¯è¦åšåˆ†å±‚ã€è§£è€¦ç­‰ï¼Œäºæ˜¯å°±åšäº† IOCã€MVC ç­‰æŠ½è±¡ã€‚

å¯ä»¥çœ‹åˆ°ï¼Œ**æŠ½è±¡æ˜¯åŸºäºç¼–ç¨‹è¯­è¨€çš„èŒƒå¼ï¼Œæ ¹æ®éœ€æ±‚åšçš„è®¾è®¡ï¼Œå¥½çš„æ¡†æ¶ä¸€å®šæ˜¯åšäº†æ»¡è¶³æŸç§ç®¡ç†ä»£ç çš„éœ€æ±‚çš„æŠ½è±¡ã€‚**

æƒ³è¦æå‡æŠ½è±¡ã€æ¶æ„è®¾è®¡èƒ½åŠ›çš„è¯ï¼Œå¯ä»¥å­¦ä¹ ä¸‹é¢å‘å¯¹è±¡çš„è®¾è®¡æ¨¡å¼ï¼Œæˆ–è€…å‡½æ•°å¼ç­‰ç¼–ç¨‹èŒƒå¼ã€‚ç ”ç©¶å„ç§æ¡†æ¶æ˜¯å¦‚ä½•åšçš„æŠ½è±¡ã€‚

#### æ€»ç»“

ä¸åŒå¹³å°æä¾›äº†ä¸åŒçš„ apiï¼Œè¿™æ˜¯åº”ç”¨å¼€å‘çš„åŸºç¡€å’Œè¾¹ç•Œã€‚å¤æ‚åº”ç”¨å¾€å¾€è¦åœ¨ api åŸºç¡€ä¸Šåšå±‚å±‚æŠ½è±¡ï¼Œä¸€èˆ¬ä¼šç”¨æ¡†æ¶åšä¸€å±‚æŠ½è±¡ï¼Œè‡ªå·±å†åšä¸€å±‚æŠ½è±¡ï¼Œç›®æ ‡æ˜¯ä¸ºäº†ä»£ç åˆ’åˆ†æ›´æ¸…æ™°ï¼Œæå‡å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚

å…¶å®æˆ‘ä»¬å†™è¿‡çš„æ‰€æœ‰ä»£ç ï¼Œéƒ½å¯ä»¥åˆ†ä¸º api å’ŒæŠ½è±¡è¿™ä¸¤æ–¹é¢ã€‚

æ·±å…¥ API åŸç†çš„è¯è¦æ·±å…¥æ“ä½œç³»ç»Ÿå’Œå„é¢†åŸŸçš„çŸ¥è¯†ã€‚æå‡æŠ½è±¡èƒ½åŠ›çš„è¯ï¼Œå¯ä»¥å­¦ä¹ é¢å‘å¯¹è±¡çš„è®¾è®¡æ¨¡å¼æˆ–è€…å‡½æ•°å¼ç­‰ç¼–ç¨‹èŒƒå¼ã€‚

ä¸ç®¡ä½ ç°åœ¨åšå“ªä¸ªå¹³å°ä¹‹ä¸Šçš„åº”ç”¨å¼€å‘ï¼Œåˆšå¼€å§‹éƒ½æ˜¯è¦å…ˆå­¦ä¹  api çš„ï¼Œä¹‹åå°±æ˜¯è¦ç†è§£å„ç§æŠ½è±¡äº†ï¼šæ¡†æ¶æ˜¯æ€ä¹ˆæŠ½è±¡çš„ï¼Œä¸Šå±‚åˆåšäº†ä»€ä¹ˆæŠ½è±¡ã€‚

API ä¿è¯ä¸‹é™ï¼ŒæŠ½è±¡å¯ä»¥æé«˜ä¸Šé™ã€‚è€Œä¸”æŠ½è±¡èƒ½åŠ›æˆ–è€…è¯´æ¶æ„èƒ½åŠ›æ˜¯å¯ä»¥è¿ç§»çš„ï¼Œæ˜¯ç¨‹åºå‘˜æœ€é‡è¦çš„èƒ½åŠ›ä¹‹ä¸€ã€‚

#### ç›¸å…³æ–‡ç« 

- [ä½ å†™è¿‡çš„ä»£ç éƒ½é€ƒä¸è¿‡è¿™ä¸¤æ–¹é¢ï¼šAPI å’ŒæŠ½è±¡](https://mp.weixin.qq.com/s/NN1AM25kCViSKW848s9VAg)

### 2. æ•°å€¼ä¿®çº¦

#### ç®€ä»‹

Math.round å¾ˆå¤šä¸­æ–‡æ–‡æ¡£è¯´æ˜¯å–å››èˆäº”å…¥çš„æ•´æ•°ã€‚ä½†è¿™ä¸ªè¯´æ³•æ˜¯ä¸æ­£ç¡®çš„ã€‚æˆ‘ä»¬åˆ†åˆ«çœ‹ä¸€ä¸‹ Python å’Œ JS é‡Œçš„ round çš„å‡½æ•°è¿”å›ï¼š

#### Python

```python
print(round(20.5)) # 20
print(round(20.51)) # 21
print(round(-20.5)) # -20
print(round(-20.51)) # -21
```

#### JS

```js
console.log(Math.round(20.5)) // 21
console.log(Math.round(20.51)) // 21
console.log(Math.round(-20.5)) // -20
console.log(Math.round(-20.51)) // -21
```

æ˜¯ä¸æ˜¯æ„Ÿè§‰ä¸‰è§‚è¢«é¢ è¦†ï¼Ÿä¸¤ä¸ªè¯­è¨€ä¸ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£å„è‡ªå®šä¹‰å°±ä¸ä¸€æ ·ã€‚ä½†æ˜¯ä¸ºä»€ä¹ˆåŒæ ·æ˜¯ JS é‡Œï¼Œround(20.51) = 21 ,round(-20.51) = -21, round(-20.5) åˆæ˜¯ -20 å‘¢ï¼Ÿ

æˆ‘ä»¬ä¸è¯´ Pythonï¼Œåªè¯´ JS é‡Œçš„å®šä¹‰ï¼Œæˆ‘ä»¬å»ç¿» tc39 çš„æ ‡å‡† (opens new window):

> Returns the Number value that is closest to x and is integral. If two integral Numbers are equally close to x, then the result is the Number value that is closer to +âˆ. If x is already integral, the result is x. When the Math.round method is called with argument x, the following steps are taken:

> Let n be ? ToNumber(x).
> If n is NaN, +âˆğ”½, -âˆğ”½, or an integral Number, return n.
> If n < 0.5ğ”½ and n > +0ğ”½, return +0ğ”½.
> If n < +0ğ”½ and n â‰¥ -0.5ğ”½, return -0ğ”½.
> Return the integral Number closest to n, preferring the Number closer to +âˆ in the case of a tie.

æˆ‘ç¿»è¯‘ä¸€ä¸‹ï¼šè¿”å›æœ€æ¥è¿‘ä¸”ä¸ºæ•´æ•°çš„æ•°å€¼ã€‚å¦‚æœä¸¤ä¸ªæ•´æ•°ç›¸ç­‰åœ°æ¥è¿‘ xï¼Œåˆ™ç»“æœæ˜¯æ›´æ¥è¿‘çš„æ•°å€¼ã€‚å¦‚æœå·²ç»æ˜¯æ•´æ•°ï¼Œç»“æœæ˜¯ã€‚ å½“ Math.round æ–¹æ³•ä¼ å…¥ä¸€ä¸ªå‚æ•° , å°†æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. å°† `x` éšå¼ç±»å‹è½¬åŒ–ä¸ºæ•°å­— `n`
2. å¦‚æœ `n` ä¸º NaN / Infinity / -Infinityï¼Œ æˆ–è€…æ˜¯æ•´æ•°ï¼Œè¿”å› `n`
3. å¦‚æœ `+0 < n < 0.5`ï¼Œè¿”å› `+0`
4. å¦‚æœ `-0 < n < +0`, è¿”å› `-0`
5. è¿”å›æœ€æ¥è¿‘ n çš„æ•´æ•°ï¼Œå¦‚æœå’Œä¸¤ä¸ªæ•´æ•°è·ç¦»ç›¸ç­‰ï¼Œè¿”å›æ›´æ¥è¿‘`æ­£æ— ç©·` çš„é‚£ä¸ª

ç»¼ä¸Šï¼Œæ‰€ä»¥åœ¨è‡ªç„¶æ•°ä¸‹ï¼ŒMath.round çš„ç»“æœä¸æˆ‘ä»¬ç†è§£çš„å››èˆäº”å…¥ä¸€è‡´ï¼Œä½†åœ¨è´Ÿæ•°ä¸Šè¦å°å¿ƒã€‚ å…³äºä¸ºä»€ä¹ˆä¼šæœ‰ +0 å’Œ -0ï¼Œåˆæ˜¯è¦è®²ä¸€å †ï¼Œå¯ä»¥å‚çœ‹[æœˆå½±å¤§å¤§çš„è¿™ç¯‡æ–‡ç«  (opens new window)](https://github.com/akira-cn/FE_You_dont_know/issues/10)ã€‚å¦å¤–ï¼Œè¿˜æœ‰ BigInt é‡Œçš„ 0nï¼Œä½†æ²¡æœ‰ -0nï¼Œè¿™ä¸‰ä¸ª 0 åœ¨é€»è¾‘åˆ¤æ–­çš„æ—¶å€™éƒ½æ˜¯ falseã€‚

#### å…³äºå››èˆäº”å…¥

æˆ‘ä»¬å­¦æ ¡æ‰€å­¦ä¹ çš„å››èˆäº”å…¥ï¼Œå…¶å®å¹¶ä¸æ˜¯ IEEE754 æ‰€ä½¿ç”¨çš„æ ‡å‡†ä¿®çº¦æ–¹å¼ã€‚è¿™ä½¿å¾—æˆ‘ä»¬åœ¨è®¡ç®—ä¸€äº›å€¼çš„æ—¶å€™æœ‰æƒŠå–œã€‚IEEE754 ä½¿ç”¨çš„ä¿®çº¦æ ‡å‡†å« Round half to even (opens new window)ï¼Œä¹Ÿç§°ä¸ºé«˜æ–¯èˆå…¥æ³•ã€é“¶è¡Œå®¶èˆå…¥æ³•æˆ–å››èˆå…­å…¥äº”æˆåŒæ³•ã€‚è¿™æ¯”å››èˆäº”å…¥åœ¨ç´¯è®¡è¯¯å·®æ—¶ä¼šæ›´å°ã€‚

å› ä¸ºå››èˆäº”å…¥ï¼Œèˆå…¥çš„æ•°ä¸º 0 æ—¶ï¼Œèˆåå°±æ˜¯è¿™ä¸ªæ•°æœ¬èº«ï¼Œè€Œ 1-9 å…± 9 ä¸ªæ•°ï¼Œ5 å¤„äºä¸­é—´ï¼Œå¦‚æœ 5-9 éƒ½è¿›ä¸€ï¼Œè¿›ä¸€çš„æ¦‚ç‡æ˜¯ä¹åˆ†ä¹‹äº”ï¼Œè€Œ 1-4 èˆå»ï¼Œæ¦‚ç‡æ˜¯ä¹åˆ†ä¹‹å››ï¼Œåœ¨ç´¯åŠ æ—¶ä¼šä½¿æ•´ä½“è¯¯å·®åå¤§ã€‚

å››èˆäº”å…¥åªåœ¨ä¸­æ–‡åœˆç”¨å¾—å¤šï¼Œç”šè‡³è¢«è€å¤–ç§°ä¸º Chinese Roundingã€‚è¥¿æ–¹æ›´å¤šç”¨ Bankers Roundingã€‚

é“¶è¡Œå®¶èˆå…¥æ³•çš„å…·ä½“ç®—æ³•ï¼š

```
å››èˆå…­å…¥äº”è€ƒè™‘ï¼Œäº”åéé›¶å°±è¿›ä¸€ï¼Œ
äº”åä¸ºé›¶çœ‹å¥‡å¶ï¼Œäº”å‰ä¸ºå¶åº”èˆå»ï¼Œäº”å‰ä¸ºå¥‡è¦è¿›ä¸€
```

ä»¥ä¸‹å°æ•°èˆå…¥ä¸¤ä½ç»“æœï¼š

```
0.466 -> 0.47
0.46507 -> 0.46
0.455 -> 0.46
```

#### äº‹æƒ…å¹¶æ²¡æœ‰è¿™ä¹ˆç®€å•

ç„¶è€Œï¼Œä½ åœ¨å®é™…æµ‹è¯•çš„æ—¶å€™ï¼Œå‘ç° chrome ä¸‹å®Œå…¨ä¸æ˜¯è¿™ä¹ˆä¸€å›äº‹ï¼Œæ€æ¡Œï¼š

```
0.125.toFixed(2) -> 0.13, Python3 æ˜¯ 0.12
0.465.toFixed(2) -> 0.47
10.465.toFixed(2) -> 10.46
```

åªå¥½åˆå»æŸ¥æ–‡æ¡£ï¼Œå‘ç° IEEE745 ä¸å…‰æä¾›äº† Round half to even çš„æ–¹å¼ï¼Œè¿˜æä¾›äº† ties away from zero (opens new window)çš„ä¿®çº¦è§„åˆ™ã€‚å†å»æŸ¥ tc39 é‡Œ toFixed çš„å®ç° (opens new window)ï¼ŒtoFixed çš„å®ç°å¦‚ä¸‹ï¼Œç›´æ¥ç¿»è¯‘ï¼š

```
NOTE 1

toFixedè¿”å›åŒ…å«æ­¤æ•°å€¼(https://tc39.es/ecma262/#number-value)çš„å­—ç¬¦ä¸²ï¼Œè¯¥æ•°å€¼ç”¨å°æ•°ç‚¹åçš„å°æ•°å®šç‚¹è¡¨ç¤ºæ³•è¡¨ç¤ºã€‚å¦‚æœåˆ†æ•°ä½æ•°æ— å®šä¹‰ï¼Œåˆ™å‡è®¾ä¸º0ã€‚å…·ä½“æ¥è¯´ï¼Œæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

...1-6 æ­¥ç•¥ï¼Œä¸»è¦éšå¼ç±»å‹è½¬æ¢ã€å„ç§å¼‚å¸¸å€¼å’Œè¶Šç•Œåˆ¤æ–­ã€‚

7. è®¾ x ä¸ºå®æ•°
8. ä»¤ s ä¸ºç©ºå­—ç¬¦ä¸² ""
9. å¦‚æœ x < 0, åˆ™
    a. ä»¤ s ä¸º "-".
    b. ä»¤ x = â€“x.
10. å¦‚æœ x â‰¥ 10**21, åˆ™
    a. ä»¤ m = ToString(x) (ç§‘å­¦è®¡æ•°æ³•æ•°å­—)
11. å¦åˆ™ (x < 10**21)
    a. ä»¤ n ä¸ºä¸€ä¸ªæ•´æ•°ï¼Œè®© n Ã· 10**f â€“ x å‡†ç¡®çš„æ•°å­¦å€¼å°½å¯èƒ½æ¥è¿‘é›¶ã€‚å¦‚æœæœ‰ä¸¤ä¸ªè¿™æ · n å€¼ï¼Œé€‰æ‹©è¾ƒå¤§çš„ nã€‚
    b. å¦‚æœ n = 0, ä»¤ m ä¸ºå­—ç¬¦ä¸² "0". å¦åˆ™ , ä»¤ m ä¸ºç”± n çš„åè¿›åˆ¶è¡¨ç¤ºé‡Œçš„æ•°ç»„æˆçš„å­—ç¬¦ä¸²ï¼ˆä¸ºäº†æ²¡æœ‰å‰å¯¼é›¶ï¼‰ã€‚
    c. å¦‚æœ f â‰  0, åˆ™
       i. ä»¤ k ä¸º m é‡Œçš„å­—ç¬¦æ•°ç›® .
       ii. å¦‚æœ k â‰¤ f, åˆ™
            1. ä»¤ z ä¸º f+1â€“k ä¸ª â€˜0â€™ ç»„æˆçš„å­—ç¬¦ä¸² .
            2. ä»¤ m ä¸º ä¸²è”å­—ç¬¦ä¸² z çš„ m çš„ç»“æœ .
            3. ä»¤ k = f + 1.
       iii. ä»¤ a ä¸º m çš„å‰ kâ€“f ä¸ªå­—ç¬¦ï¼Œ
       iv. ä»¤ b ä¸ºå…¶ä½™ f ä¸ªå­—ç¬¦
        v. ä»¤ m ä¸º ä¸²è”ä¸‰ä¸ªå­—ç¬¦ä¸² a, ".", å’Œ b çš„ç»“æœã€‚
12. è¿”å›ä¸²è”å­—ç¬¦ä¸² s å’Œ m çš„ç»“æœã€‚

NOTE 2

 å¯¹äºæŸäº›å€¼ï¼ŒtoFixed çš„è¾“å‡ºå¯æ¯” toString çš„æ›´ç²¾ç¡®ï¼Œå› ä¸º toString åªæ‰“å°åŒºåˆ†ç›¸é‚»æ•°å­—å€¼çš„è¶³å¤Ÿçš„æœ‰æ•ˆæ•°å­—ã€‚ä¾‹å¦‚ ,

 (1000000000000000128).toString() è¿”å› "1000000000000000100",

 è€Œ (1000000000000000128).toFixed(0) è¿”å› "1000000000000000128".
```

V8 çš„å®ç° (opens new window)çš„ç¡®éµç…§äº†è¿™ä¸ªè§„èŒƒã€‚

å¦å¤–ï¼Œå°æ•°å¹¶ä¸æ˜¯éƒ½èƒ½ç²¾ç¡®è¡¨ç¤ºçš„ï¼Œä½ å¯ä»¥ç»™ toFixed ä¼ ä¸€ä¸ªå¾ˆå¤§çš„å‚æ•°(æœ€å¤§ 100 ä½)ï¼ŒæŸ¥çœ‹è¿™ä¸ªå€¼ï¼Œæ¯”å¦‚

```
0.125.toFixed(100)
// "0.1250000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"

0.135.toFixed(100)

// "0.1350000000000000088817841970012523233890533447265625000000000000000000000000000000000000000000000000"
```

æˆ‘ä»¬å¯ä»¥çœ‹åˆ° 0.125 å¯ä»¥åœ¨ js é‡Œç²¾ç¡®è¡¨ç¤ºï¼Œ0.135 å´ä¸å¯ä»¥ï¼Œå¦å¤–ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ toPrecision æ–¹æ³•æˆ–è€…è¿™ä¸ª[åœ¨çº¿ç½‘ç«™] (opens new window)æŸ¥çœ‹å…·ä½“ç²¾åº¦ã€‚

#### ç›¸å…³æ–‡ç« 

- [æœˆå½±å¤§å¤§çš„è¿™ç¯‡æ–‡ç«  (opens new window)](https://github.com/akira-cn/FE_You_dont_know/issues/10)
- [åœ¨çº¿ç½‘ç«™](https://www.binaryconvert.com/result_double.html)
- [æ•°å€¼ä¿®çº¦](https://math.haozi.me/round.html)

## 30 seconds of code

### ç›®æ ‡

æ‰“ä¹±ä¸€ä¸ªæ•°ç»„

### æ ·ä¾‹è¾“å‡º:

```js
shuffle([1, 2, 3, 4, 5, 6, 7, 8, 9, 10]) // [9, 1, 10, 6, 8, 5, 2, 3, 7, 4]
```

### å‚è€ƒå®ç°

```js
const shuffle = <T,_>(arr: T[]): T[] =>
    arr
        .map((a) => ({ sort: Math.random(), value: a }))
        .sort((a, b) => a.sort - b.sort)
        .map((a) => a.value);

// Or
const shuffle = <T,_>(arr: T[]): T[] => arr.sort(() => 0.5 - Math.random());
```

## å¥½åº“æ¨è

- [react-image-crop](https://github.com/DominicTobias/react-image-crop)ï¼šä¸€æ¬¾å“åº”å¼çš„å›¾ç‰‡è£å‰ªå·¥å…· â€” å®ƒæ”¯æŒå“åº”å¼ï¼Œè§¦æ‘¸äº‹ä»¶ï¼ŒåŒæ—¶æ²¡æœ‰ä»»ä½•ä¾èµ–ã€‚
- [react-tsparticles](https://github.com/matteobruni/tsparticles#readme)ï¼šçµæ´»ä¸”å¯å®šåˆ¶çš„ç²’å­åŠ¨ç”» â€” è¿™ä¸ªç²’å­åŠ¨ç”»åº“å¯ç”¨ä½œç½‘ç«™èƒŒæ™¯æˆ–æ¸¸æˆå…ƒç´ ï¼Œè€Œä¸”å¯ä»¥é…ç½®æˆå„ç§å„æ ·çš„é£æ ¼ã€‚
  ![](https://camo.githubusercontent.com/19a7e464c4de4c774efbbc694109c5dd7dba439681c789e330fd4a8892cd5ed5/68747470733a2f2f7061727469636c65732e6a732e6f72672f696d616765732f64656d6f2e706e673f763d312e382e31)
- [use-prosemirror](https://github.com/dminkovsky/use-prosemirror)ï¼šå°† ProseMirror è¿™æ¬¾å¯Œæ–‡æœ¬ç¼–è¾‘å™¨é›†æˆåœ¨ React ä¸­ â€” ProseMirror æ˜¯ä¸€æ¬¾åŠŸèƒ½é½å…¨çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ã€‚å°½ç®¡å®ƒæ‰å‘å¸ƒäº†ä¸€ä¸ªå¤§ç‰ˆæœ¬ï¼Œå´å·²ç»æœ‰åƒ [PonyMessenger](https://prosemirror.net/) è¿™æ ·çš„ç½‘ç«™ä½¿ç”¨äº†å®ƒã€‚æ¥çœ‹ä¸€ä¸‹ [CodeSandbox](https://codesandbox.io/s/use-prosemirror-basic-example-nie7f?file=/src/App.tsx) ä¸Šçš„ä¾‹å­å§ã€‚

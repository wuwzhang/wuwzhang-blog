---
title: ç¬¬92æœŸ
date: '2021-11-18'
tags: ['èµ„è®¯']
draft: false
---

<TOCInline toc={props.toc} asDisclosure toHeading={3} />

## 2021/11/18

## æ¯å‘¨èµ„è®¯ - ç¬¬`92`æœŸ

### 1. JS å¼‚æ­¥å¤„ç†æ¼”è¿›ï¼ŒCallback=>Promise=>Observer

å¼‚æ­¥è°ƒç”¨å°±åƒæ˜¯æ¥æ°´ç®¡ï¼Œç›¸äº’ç¼ ç»•çš„ç®¡é“è¶Šå¤šï¼Œå°±è¶Šå®¹æ˜“æ¼æ°´ã€‚å¦‚ä½•å°†æ°´ç®¡å·§å¦™è¿é€šï¼Œä½¿æ•´ä¸ªç³»ç»Ÿæœ‰è¶³å¤Ÿçš„å¼¹æ€§ï¼Œéœ€è¦å»è®¤çœŸæ€è€ƒ ğŸ¤”

å¯¹äº JavaScript å¼‚æ­¥çš„ç†è§£ï¼Œä¸å°‘äººæ„Ÿåˆ°è¿‡å›°æƒ‘ï¼šJs æ˜¯å•çº¿ç¨‹çš„ï¼Œå¦‚ä½•åšåˆ°å¼‚æ­¥çš„å‘¢ï¼Ÿå®é™…ä¸Šï¼ŒJs å¼•æ“é€šè¿‡æ··ç”¨ 2 ç§å†…å­˜æ•°æ®ç»“æ„ï¼šæ ˆå’Œé˜Ÿåˆ—ï¼Œæ¥å®ç°çš„ã€‚æ ˆä¸é˜Ÿåˆ—çš„äº¤äº’ä¹Ÿå°±æ˜¯å¤§å®¶æ‰€ç†ŸçŸ¥çš„ Js äº‹ä»¶å¾ªç¯~~

ä¸¾ä¸ªæ —å­

```js
function fooB() {
  console.log('fooB: called')
}

function fooA() {
  fooB()
  console.log('fooA: called')
}

fooA()
// -> fooB: called
// -> fooA: called
```

JS å¼•æ“è§£æå¦‚ä¸‹ï¼š

```
1. push fooA to stack
<stack>
|fooA| <- push

2. push fooB to stack
<stack>
|fooB| <- push
|fooA|

3. pop fooB from stack and execute
<stack>
|fooB| <- pop
|fooA|

// -> fooB: called
<stack>
|fooA|

4. pop fooA from stack and execute
<stack>
|fooA| <- pop

// -> fooA: called

<stack>
|   | <- stack is empty
```

ä»ä»¥ä¸Šä»£ç å¯ä»¥çœ‹å‡ºï¼ŒfooAã€fooB ä¸¤ä¸ªåŒæ­¥å‡½æ•°éƒ½è¢«å‹å…¥ æ ˆ ä¸­ï¼Œé‚£ä¹ˆä»€ä¹ˆæ ·çš„å‡½æ•°ä¼šè¢«æ”¾å…¥ é˜Ÿåˆ— ä¸­å‘¢ï¼Ÿ

å½“ç„¶å°±æ˜¯åŒ…å«å¼‚æ­¥æ“ä½œçš„å‡½æ•°äº†ï¼š

- setTimeout
- setInterval
- promise
- ajax
- DOM events

ä¸¾ä¸ªæ —å­ ğŸŒ°

```js
function fooB() {
  setTimeout(() => console.log('API call B'))
  console.log('fooB: called')
}

function fooA() {
  setTimeout(() => console.log('API call A'))
  fooB()
  console.log('fooA: called')
}

fooA()
// -> fooB: called
// -> fooA: called
// -> API call A
// -> API call B
```

JS å¼•æ“è§£æå¦‚ä¸‹ï¼š

```js
1. push fooA to stack
<stack>
|fooA| <- push

2. push 'API call A' to queue

<queue>|'API call A'| <- push

3. push fooB to stack
<stack>
|fooB| <- push
|fooA|

4. push 'API call B' to queue

<queue>|'API call A'|'API call B'| <- push

5. pop fooB from stack and execute
<stack>
|fooB| <- pop
|fooA|

// -> fooB: called

<stack>
|fooA|

6. pop fooA from stack and execute
<stack>
|fooA| <- pop

// -> fooA: called

<stack> <- stack is empty
|   |

7. pop 'API call A' from queue and execute

<queue>|'API call A'| <- pop |'API call B'|

// -> API call A

<queue>|'API call B'|

8. pop 'API call B' from queue and execute

<queue>|'API call B'| <- pop

// -> API call B

<queue>|   | <- queue is empty
```

gif åŠ¨å›¾é‡Šä¹‰å¦‚ä¸‹ï¼š

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/24c021aa72a14ce6b91b496fd7832b5a~tplv-k3u1fbpfcp-watermark.awebp?)

é€šè¿‡ç®€å•çš„å›é¡¾ Js å†…å­˜ä¸­æ ˆå’Œé˜Ÿåˆ—æ˜¯å¦‚ä½•äº¤äº’åï¼ˆæ²¡æœ‰ç»†è¯´å¾®ä»»åŠ¡ã€å®ä»»åŠ¡ï¼‰ï¼Œå†çœ‹ç›®å‰æˆ‘ä»¬æ˜¯å¦‚ä½•å»ç»„ç»‡è¿™ç§äº¤äº’çš„~

æ²¡é”™ï¼Œå°±æ˜¯ä»¥ä¸‹ 3 ç§ç»„ç»‡æ–¹å¼ï¼Œä¹Ÿæ˜¯æœ¬ç¯‡æ ¸å¿ƒé‡ç‚¹ï¼š

- Callback
- Promise
- Observer

Callback=>Promise=>Observerï¼Œåä¸€ä¸ªéƒ½æ˜¯åŸºäºå‰ä¸€ä¸ªçš„æ¼”è¿›~

#### Callback

æ€ä¹ˆç†è§£ Callback ï¼Ÿä»¥æ‰“ç”µè¯ç»™å®¢æœä¸ºä¾‹ï¼Œæœ‰ä¸¤ç§é€‰æ‹©ï¼š

- æ’é˜Ÿç­‰å¾…å®¢æœæ¥å¬ï¼›
- é€‰æ‹©å®¢æœæœ‰ç©ºæ—¶å›ç”µç»™ä½ ã€‚
  ç¬¬ 2 ç§é€‰æ‹©å°±æ˜¯ JavaScript Callback å›è°ƒæ¨¡å¼ï¼Œåœ¨ç­‰å¾…å®¢æœå›å¤çš„åŒæ—¶ï¼Œå¯ä»¥åšå…¶å®ƒäº‹æƒ…ï¼Œä¸€æ—¦å®¢æœæœ‰ç©ºï¼Œä¼šä¸»åŠ¨å›ç”µç»™ä½ ~

```js
function success(res) {
  console.log('API call successful')
}

function fail(err) {
  console.log('API call failed')
}

function callApiFoo(success, fail) {
  fetch(url)
    .then((res) => success(res))
    .catch((err) => fail(err))
}

callApiFoo(success, fail)
```

Callback ç¼ºç‚¹æ˜¯ï¼šåµŒå¥—è°ƒç”¨ä¼šå½¢æˆå›è°ƒåœ°ç‹±ï¼Œå¦‚ä¸‹ï¼›

```js
callApiFooA((resA)=>{
    callApiFooB((resB)=>{
        callApiFooC((resC)=>{
            console.log(resC);
        }), fail);
    }), fail);
}), fail);
```

#### Promise

ä¼—æ‰€å‘¨çŸ¥ï¼ŒPromise å°±æ˜¯æ¥è§£å†³å›è°ƒåœ°ç‹±çš„~

```js
function callApiFooA() {
  return fetch(url) // JS fetch method returns a Promise
}

function callApiFooB(resA) {
  return fetch(url + '/' + resA.id)
}

function callApiFooC(resB) {
  return fetch(url + '/' + resB.id)
}

callApiFooA().then(callApiFooB).then(callApiFooC).catch(fail)
```

ä¸æ­¤åŒæ—¶ï¼ŒPromise è¿˜æä¾›äº†å¾ˆå¤šå…¶å®ƒæ›´å…·æ‰©å±•æ€§çš„è§£å†³æ–¹æ¡ˆï¼Œæ¯”å¦‚ Promise.allã€Promise.race ç­‰ï¼›

// Promise.allï¼šå¹¶å‘æ‰§è¡Œï¼Œå…¨éƒ¨å˜ä¸º resolve æˆ– æœ‰ reject çŠ¶æ€å‡ºç°çš„æ—¶å€™ï¼Œå®ƒæ‰ä¼šå»è°ƒç”¨ .then æ–¹æ³•ï¼›

```js
function callApiFooA() {
  return fetch(urlA)
}

function callApiFooB() {
  return fetch(urlB)
}

function callApiFooC([resA, resB]) {
  return fetch(url + '/' + resA.id + '/' + resB.id)
}

function callApiFooD(resC) {
  return fetch(url + '/' + resC.id)
}

Promise.all([callApiFooA(), callApiFooB()]).then(callApiFooC).then(callApiFooD).catch(fail)
```

Promise è®©ä»£ç çœ‹èµ·æ¥æ›´ç®€æ´ï¼Œä½†æ˜¯æ¼”è¿›è¿˜æ²¡ç»“æŸï¼›å¦‚æœæƒ³å¤„ç†å¤æ‚çš„æ•°æ®æµï¼Œç”¨ Promise å°†ä¼šå¾ˆéº»çƒ¦......

#### Observer

å¤„ç†å¤šä¸ªå¼‚æ­¥æ“ä½œæ•°æ®æµæ˜¯å¾ˆå¤æ‚çš„ï¼Œå°¤å…¶æ˜¯å½“å®ƒä»¬ä¹‹é—´ç›¸äº’ä¾èµ–æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»ä»¥æ›´å·§å¦™çš„æ–¹å¼å°†å®ƒä»¬ç»„åˆï¼›Observer ç™»åœºï¼

observer åˆ›å»ºï¼ˆå‘å¸ƒï¼‰éœ€æ›´æ”¹çš„æ•°æ®æµï¼Œsubscribe è°ƒç”¨ï¼ˆè®¢é˜…æ¶ˆè´¹ï¼‰æ•°æ®æµï¼›ä»¥ RxJS ä¸¾ä¾‹ï¼š

```js
function callApiFooA() {
  return fetch(urlA)
}

function callApiFooB() {
  return fetch(urlB)
}

function callApiFooC([resAId, resBId]) {
  return fetch(url + '/' + resAId + '/' + resBId)
}

function callApiFooD(resC) {
  return fetch(url + '/' + resC.id)
}

Observable.from(Promise.all([callApiFooA(), callApiFooB()]))
  .pipe(
    map(([resA, resB]) => [resA.id, resB.id]), // <- extract ids
    switchMap((resIds) => Observable.from(callApiFooC(resIds))),
    switchMap((resC) => Observable.from(callApiFooD(resC))),
    tap((resD) => console.log(resD))
  )
  .subscribe()
```

è¯¦ç»†è¿‡ç¨‹ï¼š

- Observable.from å°†ä¸€ä¸ª Promises æ•°ç»„è½¬æ¢ä¸º Observableï¼Œå®ƒæ˜¯åŸºäº callApiFooA å’Œ callApiFooB çš„ç»“æœæ•°ç»„ï¼›
- map â€” ä» API å‡½æ•° A å’Œ B çš„ Respond ä¸­æå– IDï¼›
- switchMap â€” ä½¿ç”¨å‰ä¸€ä¸ªç»“æœçš„ id è°ƒç”¨ callApiFooCï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ Observableï¼Œæ–° Observable æ˜¯ callApiFooC(resIds) çš„è¿”å›ç»“æœï¼›
- switchMap â€” ä½¿ç”¨å‡½æ•° callApiFooC çš„ç»“æœè°ƒç”¨ callApiFooDï¼›
- tap â€” è·å–å…ˆå‰æ‰§è¡Œçš„ç»“æœï¼Œå¹¶å°†å…¶æ‰“å°åœ¨æ§åˆ¶å°ä¸­ï¼›
- subscribe â€” å¼€å§‹ç›‘å¬ observableï¼›

Observable æ˜¯å¤šæ•°æ®å€¼çš„ç”Ÿäº§è€…ï¼Œå®ƒåœ¨å¤„ç†å¼‚æ­¥æ•°æ®æµæ–¹é¢æ›´åŠ å¼ºå¤§å’Œçµæ´»ï¼Œå®ƒåœ¨ Angular ç­‰å‰ç«¯æ¡†æ¶ä¸­è¢«ä½¿ç”¨~~

æ•²ï¼è¿™å†™æ³•ï¼Œè¿™æ¨¡å¼ä¸å°±æ˜¯å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„å‡½å­å—ï¼ŸObservable å°±æ˜¯è¢«å°è£…åçš„å‡½å­ï¼Œä¸æ–­ä¼ é€’ä¸‹å»ï¼Œå½¢æˆé“¾æ¡ï¼Œæœ€åè°ƒç”¨ subscribe æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯æƒ°æ€§æ±‚å€¼ï¼Œåˆ°æœ€åä¸€æ­¥æ‰æ‰§è¡Œã€æ¶ˆè´¹ï¼

è¿™æ ·åšæœ‰ä½•å¥½å¤„ï¼Ÿ

æ ¸å¿ƒåŸå› å°±æ˜¯åˆ†ç¦»åˆ›å»ºï¼ˆå‘å¸ƒï¼‰ å’Œ è°ƒç”¨ï¼ˆè®¢é˜…æ¶ˆè´¹ï¼‰ï¼

å†ä¸¾ä¸ªæ —å­ ğŸŒ°

```js
var observable = Rx.Observable.create(function (observer) {
  observer.next(1)
  observer.next(2)
  observer.next(3)
  setTimeout(() => {
    observer.next(4)
    observer.complete()
  }, 1000)
})

console.log('just before subscribe')
observable.subscribe({
  next: (x) => console.log('got value ' + x),
  error: (err) => console.error('something wrong occurred: ' + err),
  complete: () => console.log('done'),
})
console.log('just after subscribe')
```

observable å‘å¸ƒï¼ˆåŒæ­¥åœ°ï¼‰1ï¼Œ 2ï¼Œ 3 ä¸‰ä¸ªå€¼ï¼›1 ç§’ä¹‹åï¼Œç»§ç»­å‘å¸ƒ 4 è¿™ä¸ªå€¼ï¼Œæœ€åç»“æŸï¼›

subscribe è®¢é˜…ï¼Œè°ƒç”¨æ‰§è¡Œï¼›subscription.unsubscribe() å¯ä»¥åœ¨è¿‡ç¨‹ä¸­ä¸­æ­¢æ‰§è¡Œï¼›

æ§åˆ¶å°æ‰“å°ç»“æœï¼š

```js
just before subscribe
got value 1
got value 2
got value 3
just after subscribe
got value 4
done
```

å°æ„Ÿï¼šJs å¼‚æ­¥å¤„ç†æ¼”è¿›åˆ†ä¸º 3 ä¸ªé˜¶æ®µï¼šCallback=>Promise=>Observerï¼Œé‡ç‚¹ç†è§£ä¹Ÿå°±æ˜¯ Observerï¼ŒObserver å°±åƒæ˜¯å‡½æ•°ç¼–ç¨‹çš„å‡½å­ï¼Œå°è£…ã€ä¼ é€’é“¾ã€å»¶è¿Ÿæ‰§è¡Œï¼Œå‡ ä¹ä¸€æ‘¸ä¸€æ ·ï¼Œä¸è¿‡å®ƒæ›´åŠ å¼ºè°ƒå‘å¸ƒå’Œè®¢é˜…çš„æ€æƒ³ï¼åˆ†å‰²å‡½æ•°çš„åˆ›å»ºå’Œæ‰§è¡Œä¸ºä¸¤ä¸ªç‹¬ç«‹çš„åŸŸï¼Œå¯¹äºå¼¹æ€§ç»„è£…å¼‚æ­¥æ°´ç®¡è‡³å…³é‡è¦ï¼ï¼

#### æ¥æº

- [JS å¼‚æ­¥å¤„ç†æ¼”è¿›ï¼ŒCallback=>Promise=>Observer](https://juejin.cn/post/7029093184332365855)

### 2. 3D ç©¿æ¢­æ•ˆæœï¼Ÿä½¿ç”¨ CSS è½»æ¾æå®š

#### èƒŒæ™¯

å‘¨æœ«åœ¨å®¶ä¹ æƒ¯æ€§ç™»é™† Apexï¼Œå‡†å¤‡ç©å‡ ç›˜ã€‚åœ¨ç™»é™†åŠ é€Ÿå™¨çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°åŠ é€Ÿå™¨åˆ°æœŸäº†ã€‚

æˆ‘ä¸€ç›´ç”¨çš„è…¾è®¯ç½‘æ¸¸åŠ é€Ÿå™¨ï¼Œç„¶è€Œç‚¹å‡»å……å€¼æŒ‰é’®ï¼Œæç¤ºæœ€è¿‘å®¢æˆ·ç«¯å‡çº§æ”¹é€ ï¼Œæš‚ä¸æ”¯æŒå……å€¼ï¼ˆè¿™ä¸ªæ“ä½œæŠŠæˆ‘éœ‡æƒŠäº†~ï¼‰ã€‚åªèƒ½è½¬å¤´ä¸‹è½½[ç½‘æ˜“ UU åŠ é€Ÿå™¨](https://uu.163.com/)ã€‚

æ‰“å¼€ UU åŠ é€Ÿå™¨é¦–é¡µï¼Œæ˜ å…¥çœ¼å¸˜çš„æ˜¯è¿™æ ·ä¸€å¹…ç”»é¢ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/023c48a8910d410ba8d9928714ba8d78~tplv-k3u1fbpfcp-watermark.awebp?)

ç¬é—´ï¼Œè¢«å®ƒè¿™ä¸ªèƒŒæ™¯å›¾å¸å¼•ã€‚

å‡ºäºå¯¹ CSS çš„æ•æ„Ÿï¼Œç›²çŒœäº†ä¸€æ³¢è¿™ä¸ªç”¨ CSS å®ç°çš„ï¼Œè‡³å°‘ä¹Ÿåº”è¯¥æ˜¯ Canvasã€‚æ‰“å¼€æ§åˆ¶å°ï¼Œç¨å¾®æœ‰ç‚¹ç‚¹å¤±æœ›ï¼Œå±…ç„¶æ˜¯ä¸€ä¸ª .mp4 æ–‡ä»¶ï¼š
![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/adcef3b6e141442893570166432afa1b~tplv-k3u1fbpfcp-watermark.awebp)

å†çœ‹çœ‹ Network é¢æ¿ï¼Œè¿™ä¸ª .mp4 æ–‡ä»¶å±…ç„¶éœ€è¦ 3.5Mï¼Ÿ

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9de054b018d74cd2aea00cda1408355c~tplv-k3u1fbpfcp-watermark.awebp)

emmï¼Œç¬é—´ä¸æƒ³æ‰“æ¸¸æˆäº†ã€‚è¿™ä¹ˆä¸ªèƒŒæ™¯å›¾ï¼ŒCSS ä¸èƒ½æå®šä¹ˆï¼Ÿ

#### ä½¿ç”¨ CSS 3D å®ç°æ˜Ÿé™… 3D ç©¿æ¢­æ•ˆæœ

è¿™ä¸ªæŠ€å·§ï¼Œæˆ‘åœ¨ [å¥‡æ€å¦™æƒ³ CSS 3D åŠ¨ç”» | ä»…ä½¿ç”¨ CSS èƒ½åˆ¶ä½œå‡ºå¤šæƒŠè‰³çš„åŠ¨ç”»](https://github.com/chokcoco/iCSS/issues/132) ä¹Ÿæœ‰æåŠè¿‡ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥ä¸€å¹¶çœ‹çœ‹ã€‚

å‡è®¾æˆ‘ä»¬æœ‰è¿™æ ·ä¸€å¼ å›¾å½¢ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/30df2f176c404e839202d7abbc6202c1~tplv-k3u1fbpfcp-watermark.awebp)

```html
<div class="g-container">
  <div class="g-group">
    <div class="item item-right"></div>
    <div class="item item-left"></div>
    <div class="item item-top"></div>
    <div class="item item-bottom"></div>
    <div class="item item-middle"></div>
  </div>
</div>
```

```scss
body {
  background: #000;
}
.g-container {
  position: relative;
}
.g-group {
  position: absolute;
  width: 100px;
  height: 100px;
  left: -50px;
  top: -50px;
  transform-style: preserve-3d;
}
.item {
  position: absolute;
  width: 100%;
  height: 100%;
  background: rgba(255, 255, 255, 0.5);
}
.item-right {
  background: red;
  transform: rotateY(90deg) translateZ(50px);
}
.item-left {
  background: green;
  transform: rotateY(-90deg) translateZ(50px);
}
.item-top {
  background: blue;
  transform: rotateX(90deg) translateZ(50px);
}
.item-bottom {
  background: deeppink;
  transform: rotateX(-90deg) translateZ(50px);
}
.item-middle {
  background: rgba(255, 255, 255, 0.5);
  transform: rotateX(180deg) translateZ(50px);
}
```

ä¸€å…±è®¾ç½®äº† 5 ä¸ªå­å…ƒç´ ï¼Œä¸è¿‡ä»”ç»†çœ‹ CSS ä»£ç ï¼Œå…¶ä¸­ 4 ä¸ªå­å…ƒç´ éƒ½è®¾ç½®äº† rotateX/Y(90deg/-90deg)ï¼Œä¹Ÿå°±æ˜¯ç»• X è½´æˆ–è€… Y è½´æ—‹è½¬äº† 90Â°ï¼Œåœ¨è§†è§‰ä¸Šæ˜¯å‚ç›´å±å¹•çš„ä¸€å¼ å¹³é¢ï¼Œæ‰€ä»¥ç›´è§‚è§†è§‰ä¸Šæˆ‘ä»¬æ˜¯ä¸åˆ°çš„ï¼Œåªèƒ½çœ‹åˆ°ä¸€ä¸ªå¹³é¢ .item-middleã€‚

æˆ‘å°† 5 ä¸ªå­ item è®¾ç½®äº†ä¸åŒçš„èƒŒæ™¯è‰²ï¼Œç»“æœå¦‚ä¸‹

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9c417652b9524393805d6c4ab98124ab~tplv-k3u1fbpfcp-watermark.awebp)

ç°åœ¨çœ‹æ¥ï¼Œå¥½åƒå¹³å¹³æ— å¥‡ï¼Œç¡®å®ä¹Ÿæ˜¯ã€‚

ä¸è¿‡ï¼Œè§è¯å¥‡è¿¹çš„æ—¶å€™æ¥äº†ï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬ç»™çˆ¶å…ƒç´  .g-container è®¾ç½®ä¸€ä¸ªæå°çš„ perspectiveï¼Œè­¬å¦‚ï¼Œè®¾ç½®ä¸€ä¸ª perspective: 4pxï¼Œçœ‹çœ‹æ•ˆæœï¼š

```scss
.g-container {
  position: relative;
+ perspective: 4px;
}
// ...å…¶ä½™æ ·å¼ä¿æŒä¸å˜
```

æ­¤æ—¶ï¼Œç”»é£éª¤å˜ï¼Œæ•´ä¸ªæ•ˆæœå°±å˜æˆäº†è¿™æ ·ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/66c9b35353fb42b094129d7578dbacb4~tplv-k3u1fbpfcp-watermark.awebp)

ç”±äº perspective ç”Ÿæ•ˆï¼ŒåŸæœ¬çš„å¹³é¢æ•ˆæœå˜æˆäº† 3D çš„æ•ˆæœã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸Šé¢å‡†å¤‡å¥½çš„æ˜Ÿç©ºå›¾ï¼Œæ›¿æ¢ä¸€ä¸‹ä¸Šé¢çš„èƒŒæ™¯é¢œè‰²ï¼Œå…¨éƒ¨éƒ½æ¢æˆåŒä¸€å¼ å›¾ï¼Œç¥å¥‡çš„äº‹æƒ…å‘ç”Ÿäº†ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/44efafd45b0749548be753952c7818f3~tplv-k3u1fbpfcp-watermark.awebp)

ç”±äºè®¾ç½®çš„ perspective éå¸¸ä¹‹ä¸‹ï¼Œè€Œæ¯ä¸ª item çš„ transform: translateZ(50px) è®¾ç½®çš„åˆæ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥å›¾ç‰‡åœ¨è§†è§‰ä¸Šè¢«æ‹‰ä¼¸çš„éå¸¸å‰å®³ã€‚ä½†æ˜¯æ•´ä½“æ˜¯å……æ»¡æ•´ä¸ªå±å¹•çš„ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åªéœ€è¦è®©è§†è§’åŠ¨èµ·æ¥ï¼Œç»™çˆ¶å…ƒç´ å¢åŠ ä¸€ä¸ªåŠ¨ç”»ï¼Œé€šè¿‡æ§åˆ¶çˆ¶å…ƒç´ çš„ translateZ() è¿›è¡Œå˜åŒ–å³å¯ï¼š

```scss
.g-container{
  position: relative;
  perspective: 4px;
  perspective-origin: 50% 50%;
}

.g-group{
  position: absolute;
  // ... ä¸€äº›å®šä½é«˜å®½ä»£ç 
  transform-style: preserve-3d;
  + animation: move 8s infinite linear;
}

@keyframes move {
  0%{
    transform: translateZ(-50px) rotate(0deg);
  }
  100%{
    transform: translateZ(50px) rotate(0deg);
  }
}
```

çœ‹çœ‹ï¼Œç¥å¥‡ç¾å¦™çš„æ˜Ÿç©ºç©¿æ¢­çš„æ•ˆæœå°±å‡ºæ¥äº†ï¼ŒAmazingï¼š

![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e67642e2a74f47e0943e04ec99bf9244~tplv-k3u1fbpfcp-watermark.awebp?)

ç¾ä¸­ä¸è¶³ä¹‹å¤„åœ¨äºï¼ŒåŠ¨ç”»æ²¡èƒ½æ— é™è¡”æ¥ä¸Šï¼Œå¼€å¤´å’Œç»“å°¾éƒ½æœ‰å¾ˆå¤§çš„é—®é¢˜ã€‚
å½“ç„¶ï¼Œè¿™éš¾ä¸å€’æˆ‘ä»¬ï¼Œæˆ‘ä»¬å¯ä»¥ï¼š

1. é€šè¿‡å åŠ ä¸¤ç»„åŒæ ·çš„æ•ˆæœï¼Œä¸€ç»„æ¯”å¦ä¸€ç»„é€šè¿‡è´Ÿçš„ animation-delay æå‰è¡Œè¿›ï¼Œä½¿ä¸¤ç»„åŠ¨ç”»è¡”æ¥èµ·æ¥ï¼ˆä¸€ç»„ç»“æŸçš„æ—¶å€™å¦å¤–ä¸€ç»„è¿˜åœ¨è¡Œè¿›ä¸­ï¼‰
2. å†é€šè¿‡é€æ˜åº¦çš„å˜åŒ–ï¼Œéšè—æ‰ item-middle è¿é¢é£æ¥çš„çªå…€æ„Ÿ
3. æœ€åï¼Œå¯ä»¥é€šè¿‡çˆ¶å…ƒç´ çš„æ»¤é•œ hue-rotate æ§åˆ¶å›¾ç‰‡çš„é¢œè‰²å˜åŒ–

æˆ‘ä»¬å°è¯•ä¿®æ”¹ HTML ç»“æ„å¦‚ä¸‹ï¼š

```html
<div class="g-container">
  <div class="g-group">
    <div class="item item-right"></div>
    <div class="item item-left"></div>
    <div class="item item-top"></div>
    <div class="item item-bottom"></div>
    <div class="item item-middle"></div>
  </div>
  <!-- å¢åŠ ä¸€ç»„åŠ¨ç”» -->
  <div class="g-group">
    <div class="item item-right"></div>
    <div class="item item-left"></div>
    <div class="item item-top"></div>
    <div class="item item-bottom"></div>
    <div class="item item-middle"></div>
  </div>
</div>
```

ä¿®æ”¹åçš„æ ¸å¿ƒ CSS å¦‚ä¸‹

```scss
.g-container {
  perspective: 4px;
  position: relative;
  // hue-rotate å˜åŒ–åŠ¨ç”»ï¼Œå¯ä»¥è®©å›¾ç‰‡é¢œè‰²ä¸€ç›´å˜æ¢
  animation: hueRotate 21s infinite linear;
}

.g-group {
  transform-style: preserve-3d;
  animation: move 12s infinite linear;
}
// è®¾ç½®è´Ÿçš„ animation-delayï¼Œè®©ç¬¬äºŒç»„åŠ¨ç”»æå‰è¿›è¡Œ
.g-group:nth-child(2) {
  animation: move 12s infinite linear;
  animation-delay: -6s;
}
.item {
  background: url(https://z3.ax1x.com/2021/08/20/fLwuMd.jpg);
  background-size: cover;
  opacity: 1;
  // å­å…ƒç´ çš„é€æ˜åº¦å˜åŒ–ï¼Œå‡å°‘åŠ¨ç”»è¡”æ¥æ—¶å€™çš„çªå…€æ„Ÿ
  animation: fade 12s infinite linear;
  animation-delay: 0;
}
.g-group:nth-child(2) .item {
  animation-delay: -6s;
}
@keyframes move {
  0% {
    transform: translateZ(-500px) rotate(0deg);
  }
  100% {
    transform: translateZ(500px) rotate(0deg);
  }
}
@keyframes fade {
  0% {
    opacity: 0;
  }
  25%,
  60% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}
@keyframes hueRotate {
  0% {
    filter: hue-rotate(0);
  }
  100% {
    filter: hue-rotate(360deg);
  }
}
```

æœ€ç»ˆå®Œæ•´çš„æ•ˆæœå¦‚ä¸‹ï¼Œæ˜Ÿç©ºç©¿æ¢­çš„æ•ˆæœï¼Œæ•´ä¸ªåŠ¨ç”»é¦–å°¾ç›¸è¿ï¼Œå¯ä»¥ä¸€ç›´æ— é™ä¸‹å»ï¼Œå‡ ä¹æ²¡æœ‰ç ´ç»½ï¼Œéå¸¸çš„èµï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/70cd9183729b4918b0b17b970cbded0a~tplv-k3u1fbpfcp-watermark.awebp?)

ä¸Šè¿°çš„å®Œæ•´ä»£ç ï¼Œä½ å¯ä»¥çŒ›å‡»è¿™é‡Œï¼š[CSS çµæ„Ÿ -- 3D å®‡å®™æ—¶ç©ºç©¿æ¢­æ•ˆæœ](https://csscoco.com/inspiration/#/./3d/3d-css-galaxy-shuttle)

è¿™æ ·ï¼Œæˆ‘ä»¬å°±åŸºæœ¬è¿˜åŸäº†ä¸Šè¿°è§åˆ°çš„ç½‘æ˜“ UU åŠ é€Ÿå™¨é¦–é¡µçš„åŠ¨å›¾èƒŒæ™¯ã€‚

#### æ›´è¿›ä¸€æ­¥ï¼Œä¸€ä¸ªå›¾ç‰‡æˆ‘éƒ½ä¸æƒ³ç”¨

å½“ç„¶ï¼Œè¿™é‡Œè¿˜æ˜¯ä¼šæœ‰è¯»è€…åæ§½ï¼Œä½ è¿™é‡Œä¸ä¹Ÿç”¨äº†ä¸€å¼ å›¾ç‰‡èµ„æºä¹ˆï¼Ÿæ²¡æœ‰é‚£å¼ æ˜Ÿç©ºå›¾è¡Œä¸è¡Œï¼Ÿè¿™å¼ å›¾æˆ‘ä¹Ÿæ‡’å¾—å»æ‰¾ã€‚

å½“ç„¶å¯ä»¥ï¼ŒCSS YYDSã€‚è¿™é‡Œæˆ‘ä»¬å°è¯•ä½¿ç”¨ box-shadowï¼Œå»æ›¿æ¢å®é™…çš„æ˜Ÿç©ºå›¾ï¼Œä¹Ÿæ˜¯åœ¨ä¸€ä¸ª div æ ‡ç­¾å†…å®ç°ï¼Œå€ŸåŠ©äº† SASS çš„å¾ªç¯å‡½æ•°ï¼š

```html
<div></div>
```

```sass
@function randomNum($max, $min: 0, $u: 1) {
	@return ($min + random($max)) * $u;
}

@function randomColor() {
    @return rgb(randomNum(255), randomNum(255), randomNum(255));
}

@function shadowSet($maxWidth, $maxHeight, $count) {
    $shadow : 0 0 0 0 randomColor();

    @for $i from 0 through $count {
        $x: #{random(10000) / 10000 * $maxWidth};
        $y: #{random(10000) / 10000 * $maxHeight};


        $shadow: $shadow, #{$x} #{$y} 0 #{random(5)}px randomColor();
    }

    @return $shadow;
}

body {
    background: #000;
}

div {
    width: 1px;
    height: 1px;
    border-radius: 50%;
    box-shadow: shadowSet(100vw, 100vh, 500);
}
```

è¿™é‡Œï¼Œæˆ‘ä»¬ç”¨ SASS å°è£…äº†ä¸€ä¸ªå‡½æ•°ï¼Œåˆ©ç”¨å¤šé‡ box-shadow çš„ç‰¹æ€§ï¼Œåœ¨ä¼ å…¥çš„å¤§å°çš„é«˜å®½å†…ï¼Œç”Ÿæˆä¼ å…¥ä¸ªæ•°çš„ç‚¹ã€‚

è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°è¿™æ ·ä¸€å¹…å›¾ï¼Œç”¨äºæ›¿æ¢å®é™…çš„æ˜Ÿç©ºå›¾ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9095bc747cc34d65a4b0aa4d5a0cbaba~tplv-k3u1fbpfcp-watermark.awebp)

æˆ‘ä»¬å†æŠŠä¸Šè¿°è¿™ä¸ªå›¾ï¼Œæ›¿æ¢å®é™…çš„æ˜Ÿç©ºå›¾ï¼Œä¸»è¦æ˜¯æ›¿æ¢ .item è¿™ä¸ª classï¼Œåªåˆ—å‡ºä¿®æ”¹çš„éƒ¨åˆ†ï¼š

```scss
// åŸ CSSï¼Œä½¿ç”¨äº†ä¸€å¼ æ˜Ÿç©ºå›¾
.item {
  position: absolute;
  width: 100%;
  height: 100%;
  background: url(https://z3.ax1x.com/2021/08/20/fLwuMd.jpg);
  background-size: cover;
  animation: fade 12s infinite linear;
}

// ä¿®æ”¹åçš„ CSS ä»£ç 
.item {
  position: absolute;
  width: 100%;
  height: 100%;
  background: #000;
  animation: fade 12s infinite linear;
}
.item::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  width: 1px;
  height: 1px;
  border-radius: 50%;
  box-shadow: shadowSet(100vw, 100vh, 500);
}
```

è¿™æ ·ï¼Œæˆ‘ä»¬å°±å®ç°äº†è¿™æ ·ä¸€ä¸ªæ•ˆæœï¼Œåœ¨ä¸å€ŸåŠ©é¢å¤–èµ„æºçš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨çº¯ CSS å®ç°ä¸Šè¿°æ•ˆæœï¼š

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/90bf71bfe3e34ac4b3e64c0e5c694d69~tplv-k3u1fbpfcp-watermark.awebp?)

[CodePen Demo -- Pure CSS Galaxy Shuttle 2](https://codepen.io/Chokcoco/pen/NWvYOqW)

é€šè¿‡è°ƒæ•´åŠ¨ç”»çš„æ—¶é—´ï¼Œperspective çš„å€¼ï¼Œæ¯ç»„å…ƒç´ çš„ translateZ() å˜åŒ–è·ç¦»ï¼Œå¯ä»¥å¾—åˆ°å„ç§ä¸ä¸€æ ·çš„è§‚æ„Ÿå’Œæ•ˆæœï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥åŸºäºæˆ‘ä¸Šè¿°ç»™çš„ DEMO è‡ªå·±å°è¯•å°è¯•ã€‚

#### æ¥æº

- [3D ç©¿æ¢­æ•ˆæœï¼Ÿä½¿ç”¨ CSS è½»æ¾æå®š](https://juejin.cn/post/7028757824695959588)
- [ç½‘æ˜“ UU åŠ é€Ÿå™¨](https://uu.163.com/)
- [å¥‡æ€å¦™æƒ³ CSS 3D åŠ¨ç”» | ä»…ä½¿ç”¨ CSS èƒ½åˆ¶ä½œå‡ºå¤šæƒŠè‰³çš„åŠ¨ç”»](https://github.com/chokcoco/iCSS/issues/132)
- [CSS çµæ„Ÿ -- 3D å®‡å®™æ—¶ç©ºç©¿æ¢­æ•ˆæœ](https://csscoco.com/inspiration/#/./3d/3d-css-galaxy-shuttle)
- [CodePen Demo -- Pure CSS Galaxy Shuttle 2](https://codepen.io/Chokcoco/pen/NWvYOqW)

## 30 seconds of code

### ç›®æ ‡

ç”Ÿæˆè‹±æ–‡å­—æ¯å­—ç¬¦æ•°ç»„

### å‚è€ƒå®ç°

```ts
const alphabet: string[] = 'abcdefghijklmnopqrstuvwxyz'.split('')

// Or
const alphabet: string[] = [...'abcdefghijklmnopqrstuvwxyz']

// Or
const alphabet: string[] = Array(26)
  .fill(0)
  .map((_, i) => String.fromCharCode(i + 97))

// Or
const alphabet: string[] = [...Array(26).keys()].map((i) => String.fromCharCode(i + 97))

// Or
const alphabet: string[] = [...Array(26)].map((_, i) => (i + 10).toString(36))

// Or
const alphabet: string[] = String.fromCharCode(
  ...' '
    .repeat(26)
    .split('')
    .map((_, i) => i + 97)
).split('')
```

## å¥½åº“æ¨è

- [gcoord - æ˜¯ä¸€ä¸ªå¤„ç†åœ°ç†åæ ‡ç³»çš„ JS åº“ï¼Œç”¨æ¥ä¿®æ­£ç™¾åº¦åœ°å›¾ã€é«˜å¾·åœ°å›¾åŠå…¶å®ƒäº’è”ç½‘åœ°å›¾åæ ‡ç³»ä¸ç»Ÿä¸€çš„é—®é¢˜ - 2.2k star](https://github.com/hujiulong/gcoord)
- [react-countdowm - ä¸€ä¸ªçµæ´»è‡ªå®šä¹‰çš„ react è®¡æ•°å™¨](https://github.com/ndresx/react-countdown)
- [tweenjs - JavaScript/TypeScript animation engine 8.4k star ](https://github.com/tweenjs/tween.js/)
